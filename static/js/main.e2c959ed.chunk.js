(this.webpackJsonpeasyreceipts=this.webpackJsonpeasyreceipts||[]).push([[0],{14:function(e,t,a){},21:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),i=(a(21),a(3)),o=a.n(i),s=a(4),d=a(2),u=(a(23),a(24),a(16)),m=(a(25),{0:"Janeiro",1:"Fevereiro",2:"Mar\xe7o",3:"Abril",4:"Maio",5:"Junho",6:"Julho",7:"Agosto",8:"Setembro",9:"Outubro",10:"Novembro",11:"Dezembro"});function p(e){var t=""+(e.getUTCMonth()+1),a=""+e.getDate(),n=e.getUTCFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[n,t,a].join("-")}var f=function(e){if(e){var t=new Date(e),a=t.getUTCFullYear(),n=m[t.getUTCMonth()];return(new Date).getUTCFullYear()===a?n:n+" de "+a}},v=a(8),b=(a(26),Object(v.a)((function(e){return r.a.createElement("div",{className:"receipt-card"},r.a.createElement("div",{className:"receipt-card__header"},r.a.createElement("span",{className:"receipt-card__title"},e.receipt.payerName||"..."),r.a.createElement("div",{className:"receipt-card__check_container"},r.a.createElement("div",{className:"receipt-card__check",onClick:function(){return e.onSelectionChange(!e.isSelected)}},e.enableSelection&&r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),e.isSelected&&r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))))),r.a.createElement("div",{className:"receipt-card__content"},r.a.createElement("span",null,e.receipt.referrerTo||"...")),r.a.createElement("div",{className:"receipt-card__bottom"},r.a.createElement("div",{className:"receipt-card__price"},r.a.createElement("span",null,"R$ ",e.receipt.paidValue||"?")),r.a.createElement("div",{className:"line-separator"}),r.a.createElement("div",{className:"receipt-card__action-bar"},r.a.createElement("a",{className:"receipt-card__button",href:"#receipt/"+e.receipt.id},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("a",{className:"receipt-card__button",href:"#receipt-clone/"+e.receipt.id},r.a.createElement("i",{className:"fas fa-clone"})),r.a.createElement("a",{className:"receipt-card__button",onClick:function(){!0===window.confirm("Realmente deseja remover esse recibo?")&&e.onRemove(e.receipt.id)}},r.a.createElement("i",{className:"fas fa-trash"})))))}))),h=(a(28),function(e){var t=e.show?"modal-custom":"modal-custom hidden";return r.a.createElement("div",{className:t},r.a.createElement("section",{className:"modal-main"},e.children,r.a.createElement("a",{onClick:e.handleClose},"Cancelar")))}),E=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(),o=Object(d.a)(i,2),s=o[0],u=o[1];return r.a.createElement("div",{className:"receipts-by-month-container",key:e.title},r.a.createElement(h,{show:s,handleClose:function(){u(!1)}},r.a.createElement("a",{onClick:function(){e.onSelectAll(e.receipts),u(!1)}},"Selecionar todos")),r.a.createElement("div",{className:"receipts-by-month__header"},r.a.createElement("div",{className:"receipts-by-month__header__left"},r.a.createElement("i",{className:"fas "+(l?"fa-chevron-right ":"fa-chevron-down "),onClick:function(){return c(!l)}}),r.a.createElement("span",{className:"receipts-by-month__title"},e.title),r.a.createElement("span",{className:"receipts-by-month__details"},e.receipts.length)),r.a.createElement("div",{className:"receipts-by-month__header__right"},r.a.createElement("i",{className:"fas fa-ellipsis-v receipts-by-month__menu",onClick:function(){return u(!0)}}))),r.a.createElement("div",{className:"receipts-by-month__list"},e.receipts.map((function(t){return!l&&(!e.payerNameFiltering||t.payerName&&t.payerName.includes(e.payerNameFiltering)?r.a.createElement(b,{receipt:t,onRemove:e.onRemove,enableSelection:e.enableSelection,isSelected:void 0!==e.receiptsSelected.get(t.id),onSelectionChange:function(a){return e.onSelectionChange(t.id,a?t:void 0)}}):void 0)}))))},y=function(e){var t=Object(n.useState)(),a=Object(d.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(h,{show:l,handleClose:function(){c(!1)}},r.a.createElement("a",{onClick:function(){e.onClickToEnableSelectMode(),c(!1)}},"Selecionar recibos")),!e.isSelectModeOn&&r.a.createElement("div",{className:"flex flex-col pb-2"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-1 px-2 mx-2 text-2xl"},"Recibos Facil"),r.a.createElement("div",{className:"flex-none"},r.a.createElement("input",{placeholder:"Pesquise por nome",className:"input input-ghost text-xl",type:"search",onChange:function(t){return e.onChangeOfPayerNameToFilter(t.target.value)}})),r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){return c(!0)}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})))))),e.isSelectModeOn&&r.a.createElement("div",{className:"flex flex-col pb-2"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){e.onClickToDisableSelectMode()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-6 h-6 stroke-current text-error"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))),r.a.createElement("div",{className:"flex-1 text-2xl"},0===e.receiptsSelected.size&&"Selecionar recibos",e.receiptsSelected.size>0&&e.receiptsSelected.size),r.a.createElement("div",{className:"flex-none"},e.receiptsSelected.size>0&&r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-ghost px-1",onClick:e.onClickToPrintSelectedReceipts},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})),r.a.createElement("label",{className:"container text-2xs"},"Imprimir")),r.a.createElement("button",{className:"btn btn-ghost px-1",onClick:e.onClickToEditSelectedReceipts},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),r.a.createElement("label",{className:"container text-2xs"},"Editar m\xfaltipos")),r.a.createElement("button",{className:"btn btn-ghost px-1",onClick:e.onClickToCloneSelectedReceipts},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})),r.a.createElement("label",{className:"container text-2xs"},"Duplicar")),r.a.createElement("button",{className:"btn btn-ghost px-1",onClick:e.onClickToDeleteSelectedReceipts},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})),r.a.createElement("label",{className:"container text-2xs"},"Deletar")))))))},g=function(e){var t=e.database,a=Object(n.useState)(),l=Object(d.a)(a,2),c=l[0],i=l[1],m=Object(n.useState)(new Map),p=Object(d.a)(m,2),v=p[0],b=p[1],h=Object(n.useState)(!1),g=Object(d.a)(h,2),N=g[0],x=g[1];function w(e){var t=new Map(v);e.map((function(e){t.set(e.id,e)})),b(t),x(!0)}function k(e,t){if(t)b(new Map(v).set(e,t));else{var a=new Map(v);a.delete(e),b(a)}}function C(){x(!1),b(new Map)}function O(){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllReceipts();case 2:(a=e.sent).sort((function(e,t){return t.dateAsTimeStamp-e.dateAsTimeStamp})),n=a.reduce((function(e,t){var a=e.get(t.yearAndMonth)||[];return a.push(t),e.set(t.yearAndMonth,a),e}),new Map),i(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){O()}),[]);var R=Object(n.useState)(""),j=Object(d.a)(R,2),A=j[0],T=j[1];function M(e){t.deleteReceipt(e).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O();case 1:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar o recibo por um erro inesperado."),console.log(e)}))}return r.a.createElement("div",{className:"receipts-card"},r.a.createElement(y,{isSelectModeOn:N,onChangeOfPayerNameToFilter:T,onClickToCloneSelectedReceipts:function(){var e=v.values();if(!0===window.confirm("Confirma a duplica\xe7\xe3o de ".concat(v.size," recibos?"))){for(var a=[],n=e.next();!n.done;){var r=n.value;r.date=void 0,a.push(r),n=e.next()}t.arrayAdd(a).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(),C();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel clonar os recibo selecionados."),console.log(e)}))}},onClickToDeleteSelectedReceipts:function(){!0===window.confirm("Confirma a dele\xe7\xe3o de ".concat(v.size," recibos?"))&&t.batchDelete(v.keys()).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(),C();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar os recibos por um erro inesperado."),console.log(e)}))},onClickToDisableSelectMode:C,onClickToEnableSelectMode:function(){return x(!0)},onClickToPrintSelectedReceipts:function(){return function(){for(var e=v.keys(),t=e.next(),a=new Array;!t.done;)a.push(t.value),t=e.next();window.location.hash="receipts-to-print?receiptIds=".concat(JSON.stringify(a))}()},onClickToEditSelectedReceipts:function(){return function(){for(var e=v.keys(),t=e.next(),a=new Array;!t.done;)a.push(t.value),t=e.next();window.location.hash="#multi-edition?receiptIds=".concat(JSON.stringify(a))}()},receiptsSelected:v}),c&&Object(u.a)(c.keys()).map((function(e,t){var a=c.get(e)||[],n=f(e)||"\xc1rea de trabalho (sem data ou clonado)";return r.a.createElement(E,{title:n,receipts:a,enableSelection:N,receiptsSelected:v,payerNameFiltering:A,onRemove:M,onSelectionChange:k,onSelectAll:w})})))},N=a(12),x=a(6),w=a(7),k=function(){function e(){Object(x.a)(this,e),this.id=void 0,this.payerName=void 0,this.payerAddress=void 0,this.referrerTo=void 0,this.paidValue=void 0,this.date=void 0,this.payeeName=void 0,this.payeeCpfOrRg=void 0,this.payeeAddress=void 0}return Object(w.a)(e,[{key:"dateAsTimeStamp",get:function(){return this.date?new Date(this.date).getTime():9007199254740991}},{key:"yearAndMonth",get:function(){if(this.date)return this.date.substr(0,7)}},{key:"yearMonthAndDay",get:function(){if(this.date)return this.date}}]),e}(),C=function(e){var t=e.database,a=Object(n.useState)(new k),l=Object(d.a)(a,2),c=l[0],i=l[1],u=Object(n.useState)("create"),m=Object(d.a)(u,2),p=m[0],f=m[1];Object(n.useEffect)((function(){e.receiptId?(e.toClone?f("clone"):f("edit"),t.getReceipt(e.receiptId).then((function(e){i(e)})).catch((function(e){alert("N\xe3o foi poss\xedvel carregar o recibo."),console.log(e)}))):f("create")}),[e.receiptId]);var v=function(){var a=Object(s.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((n=new k).payerName=c.payerName,n.payerAddress=c.payerAddress,n.referrerTo=c.referrerTo,n.paidValue=c.paidValue,n.date=c.date,n.payeeName=c.payeeName,n.payeeCpfOrRg=c.payeeCpfOrRg,n.payeeAddress=c.payeeAddress,"clone"!==p){a.next=12;break}return a.next=12,t.addReceipt(n);case 12:if("edit"!==p){a.next=15;break}return a.next=15,t.updateReceipt(n,e.receiptId);case 15:if("create"!==p){a.next=18;break}return a.next=18,t.addReceipt(n);case 18:window.location.hash="#receipt-list";case 19:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),b=function(e){var t=e.target,a=t.name,n=t.value;i((function(e){var t=Object(N.a)({},e);return t[a]=n,t}))};return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"flex flex-col pb-2"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){return window.history.back()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})))),r.a.createElement("div",{className:"flex-1 text-2xl"},"create"===p&&"Criando","edit"===p&&"Editando n\xba "+c.id,"clone"===p&&"Clonando n\xba "+ +c.id),"create"==p&&r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){window.location.hash="#receipt-list"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-6 h-6 stroke-current text-error"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),r.a.createElement("form",{className:"receipt-form",name:"receipt-form",action:"javascript:void(0);",noValidate:!0},r.a.createElement("div",{className:"receipt-payer mb-4"},r.a.createElement("h5",{className:"text-xl"},"Recebido de"),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"payerName"},r.a.createElement("span",{className:"label-text"},"Recebi (emos) de")),r.a.createElement("input",{className:"input input-bordered",type:"text",name:"payerName",placeholder:"",id:"payerName",value:c.payerName,onChange:b,autoFocus:!0})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"referrerTo"},r.a.createElement("span",{className:"label-text"},"Referente")),r.a.createElement("input",{className:"input input-bordered",type:"text",name:"referrerTo",placeholder:"",id:"referrerTo",value:c.referrerTo,onChange:b})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"paidValue"},r.a.createElement("span",{className:"label-text"},"Valor")),r.a.createElement("input",{className:"input input-bordered",type:"number",name:"paidValue",placeholder:"",id:"paidValue",value:c.paidValue,onChange:b})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"payerAddress"},r.a.createElement("span",{className:"label-text"},"Endere\xe7o")),r.a.createElement("input",{className:"input input-bordered",type:"text",name:"payerAddress",placeholder:"",id:"payerAddress",value:c.payerAddress,onChange:b}))),r.a.createElement("div",{className:"form-control mb-4"},r.a.createElement("h5",{className:"text-xl"},"Data"),r.a.createElement("input",{className:"input input-bordered",type:"date",name:"date",placeholder:"",id:"date",value:c.date,onChange:b})),r.a.createElement("div",{className:"mb-4"},r.a.createElement("h5",{className:"text-xl"},"Recebido por"),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"payeeName"},r.a.createElement("span",{className:"label-text"},"Emitente")),r.a.createElement("input",{className:"input input-bordered",type:"text",name:"payeeName",placeholder:"",id:"payeeName",value:c.payeeName,onChange:b})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"payeeCpfOrRg"},r.a.createElement("span",{className:"label-text"},"CPF/RG")),r.a.createElement("input",{className:"input input-bordered",type:"text",name:"payeeCpfOrRg",placeholder:"",id:"payeeCpfOrRg",value:c.payeeCpfOrRg,onChange:b})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:"payeeAddress"},r.a.createElement("span",{className:"label-text"},"Endere\xe7o")),r.a.createElement("input",{className:"input input-bordered",type:"text",name:"payeeAddress",placeholder:"",id:"payeeAddress",value:c.payeeAddress,onChange:b}))),r.a.createElement("button",{className:"btn btn-block pt-2",onClick:function(){return v()}},"Pronto")))},O=a(29);function S(e){var t,a;if("string"==typeof e&&(t=parseFloat(e)),!t)return console.error("parameter ".concat(e," is not a number")),e;if(a=t,Number(a)===a&&a%1===0)return"".concat(O(t,{lang:"pt"})," reais");if(function(e){return Number(e)===e&&e%1!==0}(t)){var n=t%1,r=100*n;return"".concat(O(t-n,{lang:"pt"})," reais e ").concat(O(r,{lang:"pt"})," centavos")}return console.error("parameter ".concat(e," is not a number")),e}a(14);var R,j,A=Object(v.a)((function(e){return r.a.createElement("div",{className:"receipt-container"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement("span",{className:"flex-none text-xl font-semibold"},"RECIBO"),r.a.createElement("div",{className:"flex-1"},r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("label",null,"Numero"),r.a.createElement("span",null,e.receipt.id))),r.a.createElement("div",{className:"flex-none"},r.a.createElement("label",null,"Valor"),r.a.createElement("span",null,"R$",e.receipt.paidValue))),r.a.createElement("div",{className:"receipt-payer"},r.a.createElement("div",null,r.a.createElement("label",null,"Recebi (emos) de"),r.a.createElement("span",null,e.receipt.payerName)),r.a.createElement("div",null,r.a.createElement("label",null,"Endere\xe7o"),r.a.createElement("span",null,e.receipt.payerAddress)),r.a.createElement("div",null,r.a.createElement("label",null,"A import\xe2ncia de"),e.receipt.paidValue&&r.a.createElement("span",null,S(e.receipt.paidValue))),r.a.createElement("div",null,r.a.createElement("label",null,"Referente"),r.a.createElement("span",null,e.receipt.referrerTo))),r.a.createElement("div",{className:"receipt-date"},r.a.createElement("label",null,"Data"),e.date),r.a.createElement("div",{className:"receipt-payee"},r.a.createElement("div",null,r.a.createElement("label",null,"Emitente"),r.a.createElement("span",null,e.payee)),r.a.createElement("div",null,r.a.createElement("label",null,"CPF/RG"),r.a.createElement("span",null,e.payeeCpfOrRg)),r.a.createElement("div",null,r.a.createElement("label",null,"Endere\xe7o"),r.a.createElement("span",null,e.payeeAddress)),r.a.createElement("div",null,r.a.createElement("label",null,"Assinatura"),r.a.createElement("span",null))))})),T=Object(v.a)((function(e){return r.a.createElement("div",{className:"receipt-container"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex-1"},r.a.createElement("label",null,"Numero:"),r.a.createElement("span",null,e.receipt.id)),r.a.createElement("div",{className:"flex-1"},r.a.createElement("label",null,"Valor:"),r.a.createElement("span",null,"R$",e.receipt.paidValue))),r.a.createElement("div",{className:"receipt-payer"},r.a.createElement("div",null,r.a.createElement("label",null,"Recebi (emos) de:"),r.a.createElement("span",null,e.receipt.payerName)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o:"),r.a.createElement("span",null,e.receipt.payerAddress)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de:"),e.receipt.paidValue&&r.a.createElement("span",null,S(e.receipt.paidValue))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),r.a.createElement("span",null,e.receipt.referrerTo))),r.a.createElement("div",{className:"receipt-date"},r.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),e.date))})),M=function(e){var t=e.database,a=Object(n.useState)([]),l=Object(d.a)(a,2),c=l[0],i=l[1];return Object(n.useEffect)((function(){function a(){return a=Object(s.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getReceipts(e.receiptIds);case 2:n=a.sent,i(n);case 4:case"end":return a.stop()}}),a)}))),a.apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"flex flex-col pb-2 no-printable"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){return window.history.back()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})))),r.a.createElement("div",{className:"flex-1 text-2xl"},"Imprimir"))),r.a.createElement("div",{className:"action-top-bar"},r.a.createElement("button",{className:"btn no-printable",onClick:window.print},"Imprimir")),r.a.createElement("div",{className:""},r.a.createElement("h2",{className:"text-4xl mb-2"},"Canhotos"),c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(T,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))})),r.a.createElement("h2",{className:"text-4xl mb-2"},"Recibos"),c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(A,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))}))))},V=function(e){var t=[{id:"payerName",label:"Recebi (emos) de",field:R.PayerName},{id:"referrerTo",label:"Referente",field:R.ReferrerTo},{id:"paidValue",label:"Valor",field:R.PaidValue},{id:"payerAddress",label:"Endere\xe7o",field:R.PayerAddress},{id:"date",label:"Data",field:R.Date},{id:"payeeName",label:"Emitente",field:R.PayeeName},{id:"payeeCpfOrRg",label:"CPF/RG",field:R.PayeeCpfOrRg}];return r.a.createElement("form",{name:"multipleedit-form-"+e.stepSetting,action:"javascript:void(0);",noValidate:!0},t.map((function(t){return r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"cursor-pointer label",htmlFor:t.id},r.a.createElement("span",{className:"label-text"},t.label),r.a.createElement("input",{name:t.id,id:t.id,type:"checkbox",className:"checkbox",checked:e.fieldsSettings.getFieldSetting(t.field)===e.stepSetting,onChange:function(){return e.onChange(t.field,e.stepSetting,e.otherSetting)},disabled:e.fieldsSettings.getFieldSetting(t.field)===e.otherSetting})))})),r.a.createElement("div",{className:"action-bar"},e.children))};!function(e){e.ReceiptNumber="ReceiptNumber",e.PayerName="PayerName",e.ReferrerTo="ReferrerTo",e.PaidValue="PaidValue",e.PayerAddress="PayerAddress",e.Date="Date",e.PayeeName="PayeeName",e.PayeeCpfOrRg="PayeeCpfOrRg",e.PayeeAddress="PayeeAddress"}(R||(R={})),function(e){e.None="None",e.ToIdentify="ToIdentify",e.ToUpdate="ToUpdate"}(j||(j={}));var P=function(){function e(){Object(x.a)(this,e),this.fieldSettingsMap=void 0,this.fieldSettingsMap=new Map([[R.ReceiptNumber,j.None],[R.PayerName,j.ToIdentify],[R.ReferrerTo,j.ToUpdate],[R.PaidValue,j.ToUpdate],[R.PayerAddress,j.None],[R.Date,j.ToUpdate],[R.PayeeName,j.None],[R.PayeeCpfOrRg,j.None]])}return Object(w.a)(e,[{key:"fieldSettings",get:function(){return this.fieldSettingsMap}},{key:"getFieldSetting",value:function(e){return this.fieldSettingsMap.get(e)}},{key:"setFieldSetting",value:function(e,t){this.fieldSettingsMap.set(e,t)}},{key:"fieldsToIdentify",value:function(){var e=new Array;return this.fieldSettingsMap.forEach((function(t,a){t===j.ToIdentify&&e.push(a)})),e}},{key:"fieldsToUpdate",value:function(){var e=new Array;return this.fieldSettingsMap.forEach((function(t,a){t===j.ToUpdate&&e.push(a)})),e}}],[{key:"Instance",value:function(t){var a=new e;return a.fieldSettingsMap=t,a}}]),e}(),I=function(e){var t=Object(n.useState)(new P),a=Object(d.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(1),o=Object(d.a)(i,2),s=o[0],u=o[1];function m(e,t){var a=P.Instance(l.fieldSettings);a.setFieldSetting(e,t),c(a)}function p(e,t,a){var n=l.getFieldSetting(e);n===t&&m(e,j.None),n===a&&m(e,t),n===j.None&&m(e,t)}return Object(n.useEffect)((function(){e.database.getMultiEditionSettings().then((function(e){c(e)})).catch((function(){console.error("Fail to load fieldsSettings")}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-col pb-2"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){1==s?window.history.back():u(s-1)}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})))),r.a.createElement("div",{className:"flex-1 text-2xl"},1===s&&"1 de 2 campos de refer\xeancia",2===s&&"2 de 2 campos a mudar"),r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){window.history.back()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"inline-block w-6 h-6 stroke-current text-error"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))),1===s&&r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement("p",null,"Selecione as informa\xe7\xf5es que ir\xe3o te ajudar a identificar qual recibo voc\xea estar\xe1 editando."),r.a.createElement(V,{fieldsSettings:l,stepSetting:j.ToIdentify,otherSetting:j.ToUpdate,onChange:p},r.a.createElement("button",{className:"btn btn-block",onClick:function(){return u(2)}},"Continuar"))),2===s&&r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement("p",null,"Selecione quais as informa\xe7\xf5es que voc\xea quer atualizar."),r.a.createElement(V,{fieldsSettings:l,stepSetting:j.ToUpdate,otherSetting:j.ToIdentify,onChange:p},r.a.createElement("button",{className:"btn btn-block",onClick:function(){e.database.saveMultiEditionSettings(l).then((function(){e.nextPageHash?window.location.hash=e.nextPageHash:window.history.back()})).catch((function(e){alert("Erro ao tentar gravar."),console.log(e)}))}},"Salvar e seguir"))))},F=function(e){return r.a.createElement("div",null,!e.readonly&&r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{className:"label",htmlFor:e.id},r.a.createElement("span",{className:"label-text"},e.label)),r.a.createElement("input",{className:"input input-bordered",type:e.type,name:e.id,placeholder:"",id:e.id,value:e.value,onChange:e.onChange,autoFocus:!0})),e.readonly&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:e.id},e.label,": "),r.a.createElement("span",{className:"font-semibold"},e.value)))},z=function(e){var t=function(e){return new Map([[R.PayerName,{id:"payerName",label:"Recebi (emos) de",value:e.payerName,type:"text"}],[R.ReferrerTo,{id:"referrerTo",label:"Referente",value:e.referrerTo,type:"text"}],[R.PaidValue,{id:"paidValue",label:"Valor",value:e.paidValue,type:"text"}],[R.PayerAddress,{id:"payerAddress",label:"Endere\xe7o",value:e.payerAddress,type:"text"}],[R.Date,{id:"date",label:"Data",value:e.date,type:"date"}],[R.PayeeName,{id:"payeeName",label:"Emitente",value:e.payeeName,type:"text"}],[R.PayeeCpfOrRg,{id:"payeeCpfOrRg",label:"CPF/RG",value:e.payeeCpfOrRg,type:"text"}]])},a=Object(n.useState)(e.receipt||new k),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(t(c)),s=Object(d.a)(o,2),u=s[0],m=s[1];Object(n.useEffect)((function(){i(e.receipt),m(t(e.receipt))}),[e.receipt.id]);var p=function(a){var n=a.target,r=n.name,l=n.value;i((function(a){var n=Object(N.a)({},a);n[r]=l;var c=new k;return c.id=n.id,c.payerName=n.payerName,c.payerAddress=n.payerAddress,c.referrerTo=n.referrerTo,c.paidValue=n.paidValue,c.date=n.date,c.payeeName=n.payeeName,c.payeeCpfOrRg=n.payeeCpfOrRg,c.payeeAddress=n.payeeAddress,m(t(n)),e.onChange(c),n}))};function f(e,t){var a=u.get(e);return r.a.createElement(F,{id:a.id,label:a.label,value:a.value||"",type:a.type,onChange:p,readonly:t})}return r.a.createElement("form",{className:"receipt-form",name:"receipt-form",action:"javascript:void(0);",noValidate:!0},r.a.createElement("div",{className:"mb-4"},e.fieldsToIdentify.map((function(e){return f(e,!0)}))),r.a.createElement("div",{className:"mb-4"},e.fieldsToUpdate.map((function(e){return f(e,!1)}))))},B=function(e){var t=Object(n.useState)(!0),a=Object(d.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(new P),v=Object(d.a)(f,2),b=v[0],h=v[1];function E(){return(E=Object(s.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.database.updateReceipt(m,m.id);case 2:(a=e.currentIndex+1)<e.receiptIds.length?window.location.hash="#multi-edition?receiptIds=".concat(JSON.stringify(e.receiptIds),"&current=").concat(a):window.location.hash="#receipt-list";case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){e.database.getMultiEditionSettings().then((function(e){h(e)})).catch((function(e){console.error("Fail to load fieldsSettings",e)})),e.database.getReceipt(e.receiptIds[e.currentIndex]).then((function(e){p(e)})).catch((function(e){console.error("Fail to load fieldsSettings",e)})).finally((function(){c(!1)}))}),[e.currentIndex]),r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-col pb-2"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){return window.history.back()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})))),r.a.createElement("div",{className:"flex-1 text-2xl"},"Editando ",e.currentIndex+1," de ",e.receiptIds.length))),l&&r.a.createElement("span",null,"Carregando..."),!l&&r.a.createElement("div",null,r.a.createElement(z,{receipt:m,onChange:function(e){return p(e)},fieldsToIdentify:b.fieldsToIdentify(),fieldsToUpdate:b.fieldsToUpdate()}),r.a.createElement("button",{className:"btn btn-block",onClick:function(){return E.apply(this,arguments)}},"Salvar e pr\xf3ximo")))},_=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-col pb-2"},r.a.createElement("div",{className:"navbar shadow-lg bg-neutral text-neutral-content rounded-box"},r.a.createElement("div",{className:"flex-none"},r.a.createElement("button",{className:"btn btn-square btn-ghost",onClick:function(){return window.history.back()}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})))),r.a.createElement("div",{className:"flex-1 text-2xl"},"Configura\xe7\xf5es"))),r.a.createElement("button",{className:"btn btn-block",onClick:function(){return window.location.hash="#multi-edition-settings"}},"Configurar campos de edi\xe7\xe3o multipla."))},D=a(5),H=a(15),q=function e(){Object(x.a)(this,e),this.id=void 0,this.value=void 0},J=new Date;J.setDate(1);var U=new Date;U.setDate(1),U.getMonth()>0?U.setMonth(U.getMonth()-1):(U.setMonth(11),U.setFullYear(U.getFullYear()-1));var L=p(J),W=p(U),Y=[{payerName:"Exemplo - Jo\xe3o Francisco",payerAddress:"Rua Capit\xe3o J\xfanio, 222, apto 301, Belo Horizonte",referrerTo:"4 sess\xf5es de terapia",paidValue:600,paidValueAsText:"",date:L,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Pedro Ferreira",payerAddress:"Rua Capitolio, 334, Belo Horizonte",referrerTo:"2 treinamentos de pais",paidValue:300,paidValueAsText:"",date:L,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Jos\xe9 Augusto",payerAddress:"Rua Almirante Neves, 4455, Belo Horizonte",referrerTo:"8 sess\xf5es de terapia",paidValue:1200,paidValueAsText:"",date:L,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Auguto Ferraz",payerAddress:"Rua dos Otonis, 908, Belo Horizonte",referrerTo:"4 sess\xf5es de terapia",paidValue:600,paidValueAsText:"",date:L,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"}],G=[{payerName:"Exemplo - Jo\xe3o Francisco",payerAddress:"Rua Capit\xe3o J\xfanio, 222, apto 301, Belo Horizonte",referrerTo:"5 sess\xf5es de terapia",paidValue:750,paidValueAsText:"",date:W,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Pedro Ferreira",payerAddress:"Rua Capitolio, 334, Belo Horizonte",referrerTo:"2 treinamentos de pais",paidValue:300,paidValueAsText:"",date:W,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Jos\xe9 Augusto",payerAddress:"Rua Almirante Neves, 4455, Belo Horizonte",referrerTo:"4 sess\xf5es de terapia",paidValue:600,paidValueAsText:"",date:W,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Auguto Ferraz",payerAddress:"Rua dos Otonis, 908, Belo Horizonte",referrerTo:"3 sess\xf5es de terapia",paidValue:450,paidValueAsText:"",date:W,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"},{payerName:"Exemplo - Carlos Lopes",payerAddress:"Rua Primavera, 431, Belo Horizonte",referrerTo:"5 sess\xf5es de terapia",paidValue:750,paidValueAsText:"",date:W,payeeName:"Rafael Pereira",payeeCpfOrRg:"123456789-01",payeeAddress:"Rua Martinho Campos, 1212, Belo Horizonte"}];G.push();var $=Y.concat(G),K=Object(H.a)("db"),Q=function(){function e(){Object(x.a)(this,e),Object.defineProperty(this,K,{writable:!0,value:void 0})}return Object(w.a)(e,[{key:"connect",value:function(){var e=this;return new Promise((function(t,a){var n=indexedDB.open("EasyReceipts",1);n.onerror=function(e){console.error("error creating/connecting to db",e),a("Failed to connected/create/update DB")},n.onsuccess=function(a){var n;Object(D.a)(e,K)[K]=null===(n=a.target)||void 0===n?void 0:n.result,console.info("connected successfuly to DB"),t("Connected")},n.onupgradeneeded=function(t){var a;Object(D.a)(e,K)[K]=null===(a=t.target)||void 0===a?void 0:a.result,Object(D.a)(e,K)[K].createObjectStore("receipt",{autoIncrement:!0}).createIndex("date","date",{unique:!1});Object(D.a)(e,K)[K].createObjectStore("userSetting",{keyPath:"id"});var n=t.target.transaction;$.map((function(e){n.objectStore("receipt").add(e).onsuccess=function(){console.log("Receipt popuplated [".concat(e,"]"))}}))}}))}},{key:"executeWithinTransaction",value:function(e,t){var a=this;return new Promise((function(n,r){var l=Object(D.a)(a,K)[K].transaction([e],"readwrite").objectStore(e),c=t.apply(void 0,[l]);c.onerror=function(t){console.error("Error on executing transaction on table ".concat(e)),r()},c.onsuccess=function(e){n(!0)}}))}},{key:"fetchById",value:function(e,t){var a=this;return new Promise((function(n,r){var l=Object(D.a)(a,K)[K].transaction([e]).objectStore(e).get(t);l.onerror=function(a){console.error("Error on fiding ".concat(t," on table ").concat(e)),r()},l.onsuccess=function(e){if(l.result){var a=l.result;a.id=t,n(a)}else n(void 0)}}))}},{key:"saveMultiEditionSettings",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchById("userSetting","multi-edition");case 2:return a=e.sent,e.abrupt("return",this.executeWithinTransaction("userSetting",(function(e){var n=new q;return n.id="multi-edition",n.value=JSON.stringify(Array.from(t.fieldSettings)),a?e.put(n):e.add(n)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMultiEditionSettings",value:function(){var e=this;return new Promise(function(){var t=Object(s.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchById("userSetting","multi-edition");case 2:r=t.sent,a(r?P.Instance(new Map(JSON.parse(r.value||""))):new P);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"addReceipt",value:function(e){return this.executeWithinTransaction("receipt",(function(t){return t.add(e)}))}},{key:"updateReceipt",value:function(e,t){if(!t)throw new Error("Id must not be undefined!");return this.executeWithinTransaction("receipt",(function(a){return a.put(e,t)}))}},{key:"deleteReceipt",value:function(e){return this.executeWithinTransaction("receipt",(function(t){return t.delete(e)}))}},{key:"batchDelete",value:function(e){var t=this;return new Promise((function(a,n){for(var r=Object(D.a)(t,K)[K].transaction(["receipt"],"readwrite"),l=e.next();!l.done;)r.objectStore("receipt").delete(l.value),l=e.next();r.oncomplete=function(e){a()},r.onerror=function(e){console.error("Error on deleting batch of receipts"),n()}}))}},{key:"batchAdd",value:function(e){var t=this;return new Promise((function(a,n){for(var r=Object(D.a)(t,K)[K].transaction(["receipt"],"readwrite"),l=e.next();!l.done;)r.objectStore("receipt").add(l.value),l=e.next();r.oncomplete=function(e){a()},r.onerror=function(e){console.error("Error on adding batch of receipts"),n()}}))}},{key:"arrayAdd",value:function(e){var t=this;return new Promise((function(a,n){for(var r=Object(D.a)(t,K)[K].transaction(["receipt"],"readwrite"),l=0;l<e.length;l++)r.objectStore("receipt").add(e[l]);r.oncomplete=function(e){a()},r.onerror=function(e){console.error("Error on adding batch of receipts"),n()}}))}},{key:"getReceipts",value:function(e){var t=this;return new Promise((function(a,n){var r=new Array;e.map((function(n,l){t.getReceipt(n).then((function(t){r.push(t),l===e.length-1&&a(r)}))}))}))}},{key:"getReceipt",value:function(e){var t=this;return new Promise(function(){var a=Object(s.a)(o.a.mark((function a(n,r){var l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.fetchById("receipt",e);case 2:(l=a.sent)?n(l):(console.warn("Receipt not found"),n(new k));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},{key:"getAllReceipts",value:function(){var e=this;return new Promise((function(t,a){var n=Object(D.a)(e,K)[K].transaction(["receipt"]).objectStore("receipt"),r=[];n.openCursor().onsuccess=function(e){var a=e.target.result;if(a){var n=new k;n.payerName=a.value.payerName,n.payerAddress=a.value.payerAddress,n.referrerTo=a.value.referrerTo,n.paidValue=a.value.paidValue,n.date=a.value.date,n.payeeName=a.value.payeeName,n.payeeCpfOrRg=a.value.payeeCpfOrRg,n.payeeAddress=a.value.payeeAddress,n.id=a.key,r.push(n),a.continue()}else console.log("No more entries!"),t(r)}}))}},{key:"db",value:function(){return Object(D.a)(this,K)[K]}}]),e}(),X=Q;function Z(){var e=window.location.hash.substr(1),t=new Map,a=e.split("/"),n=a[0]||"",r=a[1]||"";if(e.includes("?")){var l=e.split("?");n=l[0],(l[1]||"").split("&").map((function(e){var a=e.split("=");t.set(a[0],a[1])}))}return{path:n,pathId:r,queryString:t}}var ee=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(Z().path),i=Object(d.a)(c,2),u=i[0],m=i[1],p=Object(n.useState)(parseInt(Z().pathId)),f=Object(d.a)(p,2),v=f[0],b=f[1],h=Object(n.useState)(Z().queryString),E=Object(d.a)(h,2),y=E[0],N=E[1];window.onhashchange=function(){var e=Z();m(e.path),b(parseInt(e.pathId)),N(e.queryString)};var x=Object(n.useState)(new X),w=Object(d.a)(x,2),k=w[0];w[1];return Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.connect();case 2:l(!1),window.Database=k;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"rootApp"},r.a.createElement("main",null,function(){if(a)return r.a.createElement("span",null,"Carregando...");if(!u||"receipt-list"===u)return r.a.createElement(g,{database:k});if("receipt-clone"===u&&v)return r.a.createElement(C,{receiptId:v,database:k,toClone:!0});if("receipt"===u&&v)return r.a.createElement(C,{receiptId:v,database:k});if("receipt"===u)return r.a.createElement(C,{database:k});var e=y.get("receiptIds");if("receipts-to-print"===u&&void 0!=e)return r.a.createElement(M,{database:k,receiptIds:JSON.parse(e)});var t=y.get("current");return"multi-edition"===u&&void 0!=e?r.a.createElement(B,{database:k,receiptIds:JSON.parse(e),currentIndex:t?parseInt(t):0}):"multi-edition-settings"===u?r.a.createElement(I,{database:k}):"settings"===u?r.a.createElement(_,null):"NOTFOUND"}()),r.a.createElement("footer",{className:"bottom-app-bar no-printable"},r.a.createElement("a",{className:"btn btn-ghost px-1 "+("receipt-list"==u||""==u?"opacity-50":""),href:"#receipt-list"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})),r.a.createElement("label",{className:"container text-2xs"},"Lista")),r.a.createElement("a",{className:"btn btn-ghost px-1 "+("receipt"==u?"opacity-50":""),href:"#receipt"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule":"evenodd"})),r.a.createElement("label",{className:"container text-2xs"},"Novo")),r.a.createElement("a",{className:"btn btn-ghost px-1 "+("settings"==u?"opacity-50":""),href:"#settings"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"})),r.a.createElement("label",{className:"container text-2xs"},"Configura\xe7\xf5es"))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.e2c959ed.chunk.js.map