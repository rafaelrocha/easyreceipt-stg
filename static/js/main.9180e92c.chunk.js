(this.webpackJsonpeasyreceipts=this.webpackJsonpeasyreceipts||[]).push([[0],[,,,,,,,,,,function(e,a,t){},,,,function(e,a,t){e.exports=t(30)},,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(7),l=t.n(c),i=(t(19),t(2)),s=t.n(i),p=t(5),o=t(3),d=(t(21),t(22),t(23),t(24),t(6)),u=(t(25),Object(d.a)((function(e){return n.a.createElement("div",{className:"receipt-card"},n.a.createElement("h3",{className:"receipt-card__title"},e.receipt.payer||"..."),n.a.createElement("div",{className:"receipt-card__content"},n.a.createElement("p",null,e.receipt.referrerTo||"..."),n.a.createElement("span",{className:"receipt-card__price"},"R$ ",e.receipt.paidValue||"?")),n.a.createElement("div",{className:"receipt-card__bottom"},n.a.createElement("div",{className:"receipt-card__number"},n.a.createElement("span",null,"N\xba 121212")),n.a.createElement("div",{className:"line-separator"}),n.a.createElement("div",{className:"receipt-card__action-bar"},n.a.createElement("a",{className:"receipt-card__button",href:"#receipt/"+e.index},n.a.createElement("i",{className:"fas fa-edit"})),n.a.createElement("a",{className:"receipt-card__button"},n.a.createElement("i",{className:"fas fa-print"})),n.a.createElement("a",{className:"receipt-card__button",onClick:function(){!0===window.confirm("Realmente deseja remover esse recibo?")&&e.removeReceipt(e.index)}},n.a.createElement("i",{className:"fas fa-trash"})))))}))),m=(t(27),function(e){var a=e.database,t=Object(r.useState)([]),c=Object(o.a)(t,2),l=c[0],i=c[1];Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var d=Object(r.useState)(""),m=Object(o.a)(d,2),f=m[0],h=m[1];function E(e){a.deleteReceipt(e).then(Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar o recibo por um erro inesperado."),console.log(e)}))}return n.a.createElement("div",{className:"receipts-card"},n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",null,n.a.createElement("i",{className:"fas fa-home"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Recibos Facil"),n.a.createElement("div",{className:"top-app-bar__right-part"},n.a.createElement("input",{type:"text",name:"search",placeholder:"Pesquise por nome",id:"search",className:"search",value:f,onChange:function(e){return h(e.target.value)}}))),n.a.createElement("div",{className:"receipts-card-container"},l.map((function(e){return n.a.createElement(u,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e,removeReceipt:E})}))))}),f=t(13),h=(t(28),t(8)),E=function e(){Object(h.a)(this,e),this.id=void 0,this.payerName="",this.payerAddress="",this.referrerTo="",this.paidValue="",this.paidValueAsText="",this.date="",this.payeeName="",this.payeeCpfOrRg="",this.payeeAddress=""},y=function(e){var a=e.database,t=Object(r.useState)(new E),c=Object(o.a)(t,2),l=c[0],i=c[1],d=Object(r.useState)(!1),u=Object(o.a)(d,2),m=u[0],h=u[1];Object(r.useEffect)((function(){e.receiptId&&(h(!0),a.getReceipt(e.receiptId).then((function(e){i(e)})).catch((function(e){alert("N\xe3o foi poss\xedvel carregar o recibo."),console.log(e)})))}),[e.receiptId]);var y=function(){var t=Object(p.a)(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new E).payerName=l.payerName,r.payerAddress=l.payerAddress,r.referrerTo=l.referrerTo,r.paidValue=l.paidValue,r.paidValueAsText=l.paidValueAsText,r.date=l.date,r.payeeName=l.payeeName,r.payeeCpfOrRg=l.payeeCpfOrRg,r.payeeAddress=l.payeeAddress,!m){t.next=15;break}return t.next=13,a.updateReceipt(r,e.receiptId);case 13:t.next=17;break;case 15:return t.next=17,a.addReceipt(r);case 17:window.location.hash="#receipt-list";case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(e){var a=e.target,t=a.name,r=a.value;i((function(e){var a=Object(f.a)({},e);return a[t]=r,a}))};return n.a.createElement("div",{className:"new-receipt"},n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",{onClick:function(){return window.history.back()}},n.a.createElement("i",{className:"fas fa-arrow-left"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Recibo"),!m&&n.a.createElement("div",{className:"top-app-bar__right-part"},n.a.createElement("a",{onClick:function(){window.location.hash="#receipt-list"}},n.a.createElement("i",{className:"fas fa-times top-app-bar__icon"})))),n.a.createElement("div",{className:"receipt-form"},n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("h3",null,"Recebido de"),n.a.createElement("label",{htmlFor:"payerName"},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerName",placeholder:"",id:"payerName",value:l.payerName,onChange:v}),n.a.createElement("label",{htmlFor:"referrerTo"},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo",placeholder:"",id:"referrerTo",value:l.referrerTo,onChange:v}),n.a.createElement("label",{htmlFor:"paidValue"},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"number",name:"paidValue",placeholder:"",id:"paidValue",value:l.paidValue,onChange:v})),n.a.createElement("label",{htmlFor:"payerAddress"},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress",placeholder:"",id:"payerAddress",value:l.payerAddress,onChange:v}),n.a.createElement("div",{className:"receipt-header"}),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date"},"Data"),n.a.createElement("input",{className:"u-full-width",type:"date",name:"date",placeholder:"",id:"date",value:l.date,onChange:v})),n.a.createElement("div",{className:"receipt-payee top-padding"},n.a.createElement("h3",null,"Recebido por"),n.a.createElement("div",{className:"emitentCpf"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeName"},"Emitente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeName",placeholder:"",id:"payeeName",value:l.payeeName,onChange:v})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeCpfOrRg"},"CPF/RG"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg",placeholder:"",id:"payeeCpfOrRg",value:l.payeeCpfOrRg,onChange:v}))),n.a.createElement("label",{htmlFor:"payeeAddress"},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress",placeholder:"",id:"payeeAddress",value:l.payeeAddress,onChange:v}))),n.a.createElement("div",{className:"action-bar"},n.a.createElement("button",{onClick:function(){return y()}},"Pronto")))},v=(t(10),Object(d.a)((function(e){return n.a.createElement("div",{className:"receipt-container"},n.a.createElement("div",{className:"receipt-header"},n.a.createElement("span",null,"RECIBO"),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),n.a.createElement("input",{type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),n.a.createElement("input",{type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(a){return e.receipt.paidValue=a.target.value}}))),n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(a){return e.receipt.payer=a.target.value}}),n.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(a){return e.receipt.payerAddress=a.target.value}}),n.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(a){return e.receipt.paidValueAsText=a.target.value}}),n.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(a){return e.receipt.referrerTo=a.target.value}})),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})),n.a.createElement("div",{className:"receipt-payee"},n.a.createElement("div",{className:"emitentCpf"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payee-"+e.index},"Emitente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payee-"+e.index,placeholder:"",id:"payee-"+e.index,value:e.payee,readOnly:!0})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeCpfOrRg-"+e.index},"CPF/RG"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg-"+e.index,placeholder:"",id:"payeeCpfOrRg-"+e.index,value:e.payeeCpfOrRg,readOnly:!0}))),n.a.createElement("label",{htmlFor:"payeeAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress-"+e.index,placeholder:"",id:"payeeAddress-"+e.index,value:e.payeeAddress,readOnly:!0}),n.a.createElement("label",{htmlFor:"payeeSignature-"+e.index},"Assinatura"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeSignature-"+e.index,placeholder:"",id:"payeeSignature-"+e.index})))}))),b=Object(d.a)((function(e){return n.a.createElement("div",{className:"receipt-container"},n.a.createElement("div",{className:"receipt-header"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),n.a.createElement("input",{type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),n.a.createElement("input",{type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(a){return e.receipt.paidValue=a.target.value}}))),n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(a){return e.receipt.payer=a.target.value}}),n.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(a){return e.receipt.payerAddress=a.target.value}}),n.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(a){return e.receipt.paidValueAsText=a.target.value}}),n.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(a){return e.receipt.referrerTo=a.target.value}})),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})))})),x=(t(29),function(e){var a=e.database,t=Object(r.useState)([]),c=Object(o.a)(t,2),l=c[0],i=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.createElement("div",{className:"receipt-to-print-list"},n.a.createElement("header",{className:"top-app-bar no-printable"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",{onClick:function(){return window.history.back()}},n.a.createElement("i",{className:"fas fa-arrow-left"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Imprimir")),n.a.createElement("div",{className:"action-top-bar"},n.a.createElement("button",{className:"button-primary no-printable",onClick:window.print},"Imprimir")),n.a.createElement("div",{className:""},n.a.createElement("h2",null,"Canhotos"),l.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(b,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))})),n.a.createElement("h2",null,"Recibos"),l.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(v,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))}))))}),N=t(11),g=t(4),O=t(12),w=Object(O.a)("db"),A=function(){function e(){Object(h.a)(this,e),Object.defineProperty(this,w,{writable:!0,value:void 0})}return Object(N.a)(e,[{key:"connect",value:function(){var e=this;return new Promise((function(a,t){var r=indexedDB.open("EasyReceipts",1);r.onerror=function(e){console.error("error creating/connecting to db",e),t("Failed to connected/create/update DB")},r.onsuccess=function(t){var r;Object(g.a)(e,w)[w]=null===(r=t.target)||void 0===r?void 0:r.result,console.info("connected successfuly to DB"),a("Connected")},r.onupgradeneeded=function(a){var t;Object(g.a)(e,w)[w]=null===(t=a.target)||void 0===t?void 0:t.result,Object(g.a)(e,w)[w].createObjectStore("receipt",{autoIncrement:!0})}}))}},{key:"addReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(g.a)(a,w)[w].transaction(["receipt"],"readwrite");n.oncomplete=function(e){console.log("Transaction do add is done",e)},n.onerror=function(e){console.log("Transaction to add erros",e),r("Failed to add")},n.objectStore("receipt").add(e).onsuccess=function(e){console.log("Receipt created",e),t()}}))}},{key:"updateReceipt",value:function(e,a){var t=this;return new Promise((function(r,n){var c=Object(g.a)(t,w)[w].transaction(["receipt"],"readwrite");c.oncomplete=function(e){console.log("Transaction do update is done",e)},c.onerror=function(e){console.log("Transaction to update has erros",e),n("Failed to update")},c.objectStore("receipt").put(e,a).onsuccess=function(e){console.log("Receipt created",e),r()}}))}},{key:"deleteReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(g.a)(a,w)[w].transaction(["receipt"],"readwrite").objectStore("receipt").delete(e);n.onsuccess=function(e){t()},n.onerror=function(e){console.error("Error on deleting receipt"),r()}}))}},{key:"getReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(g.a)(a,w)[w].transaction(["receipt"]).objectStore("receipt").get(e);n.onerror=function(e){console.error("Error on fiding receipt"),r()},n.onsuccess=function(e){n.result||(console.warn("Receipt not found"),t({})),t(n.result)}}))}},{key:"getAllReceipts",value:function(){var e=this;return new Promise((function(a,t){var r=Object(g.a)(e,w)[w].transaction(["receipt"]).objectStore("receipt"),n=[];r.openCursor().onsuccess=function(e){var t=e.target.result;t?(t.value.id=t.key,n.push(t.value),t.continue()):(console.log("No more entries!"),a(n))}}))}},{key:"db",value:function(){return Object(g.a)(this,w)[w]}}]),e}();function j(){var e=window.location.hash.substr(1).split("/");return{first:e[0]||"",second:e[1]||""}}var R=function(){var e=Object(r.useState)(!0),a=Object(o.a)(e,2),t=a[0],c=a[1],l=Object(r.useState)(j().first),i=Object(o.a)(l,2),d=i[0],u=i[1],f=Object(r.useState)(parseInt(j().second)),h=Object(o.a)(f,2),E=h[0],v=h[1];window.onhashchange=function(){u(j().first),v(parseInt(j().second))};var b=Object(r.useState)(new A),N=Object(o.a)(b,2),g=N[0];N[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.connect();case 2:c(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.createElement("div",{className:"rootApp"},n.a.createElement("main",null,t?n.a.createElement("span",null,"Loading"):d&&"receipt-list"!==d?"receipt"===d&&E?n.a.createElement(y,{receiptId:E,database:g}):"receipt"===d?n.a.createElement(y,{database:g}):"receipts-to-print"===d?n.a.createElement(x,{database:g}):"NOTFOUND":n.a.createElement(m,{database:g})),n.a.createElement("footer",{className:"bottom-app-bar"},n.a.createElement("a",{href:"#receipt-list"},n.a.createElement("i",{className:"fas fa-list"})),n.a.createElement("a",{href:"#receipt"},n.a.createElement("i",{className:"fas fa-plus-square"})),n.a.createElement("a",{href:"#receipts-to-print"},n.a.createElement("i",{className:"fas fa-print"}))))};l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null)),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.9180e92c.chunk.js.map