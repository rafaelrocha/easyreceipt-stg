(this.webpackJsonpeasyreceipts=this.webpackJsonpeasyreceipts||[]).push([[0],[,,,,,,,,,,,,,function(e,a,t){},,,,,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(8),l=t.n(c),i=(t(21),t(2)),o=t.n(i),s=t(5),d=t(3),p=(t(23),t(24),t(25),t(26),t(15)),u=t(6),m=(t(27),Object(u.a)((function(e){return n.a.createElement("div",{className:"receipt-card"},n.a.createElement("div",{className:"receipt-card__header"},n.a.createElement("h3",{className:"receipt-card__title"},e.receipt.payerName||"..."),n.a.createElement("div",{className:"receipt-card__check_container"},n.a.createElement("div",{className:"receipt-card__check",onClick:function(){return e.onSelectionChangeFunc(!e.isSelected)}},e.isSelectable&&n.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},n.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),e.isSelected&&n.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},n.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))))),n.a.createElement("div",{className:"receipt-card__content"},n.a.createElement("p",null,e.receipt.referrerTo||"..."),n.a.createElement("span",{className:"receipt-card__price"},"R$ ",e.receipt.paidValue||"?")),n.a.createElement("div",{className:"receipt-card__bottom"},n.a.createElement("div",{className:"receipt-card__number"},n.a.createElement("span",null,"N\xba 121212")),n.a.createElement("div",{className:"line-separator"}),n.a.createElement("div",{className:"receipt-card__action-bar"},n.a.createElement("a",{className:"receipt-card__button",href:"#receipt/"+e.receipt.id},n.a.createElement("i",{className:"fas fa-edit"})),n.a.createElement("a",{className:"receipt-card__button",href:"#receipt-clone/"+e.receipt.id},n.a.createElement("i",{className:"fas fa-clone"})),n.a.createElement("a",{className:"receipt-card__button",onClick:function(){!0===window.confirm("Realmente deseja remover esse recibo?")&&e.onRemove(e.receipt.id)}},n.a.createElement("i",{className:"fas fa-trash"})))))}))),f=(t(29),{0:"Janeiro",1:"Fevereiro",2:"Mar\xe7o",3:"Abril",4:"Maio",5:"Junho",6:"Julho",7:"Agosto",8:"Setembro",9:"Outubro",10:"Novembro",11:"Dezembro"});var h=function(e){if(!e)return"Sem data";var a=new Date(e),t=a.getFullYear(),r=f[a.getMonth()];return(new Date).getFullYear()===t?r:r+" de "+t},E=(t(30),function(e){var a=e.show?"modal display-block":"modal display-none";return n.a.createElement("div",{className:a},n.a.createElement("section",{className:"modal-main"},e.children,n.a.createElement("a",{onClick:e.handleClose},"Cancelar"),n.a.createElement("br",null)))}),v=function(e){var a=e.database,t=Object(r.useState)(),c=Object(d.a)(t,2),l=c[0],i=c[1],u=Object(r.useState)(),f=Object(d.a)(u,2),v=f[0],b=f[1],y=Object(r.useState)(),N=Object(d.a)(y,2),x=N[0],g=N[1],w=Object(r.useState)(new Map),O=Object(d.a)(w,2),j=O[0],_=O[1],C=Object(r.useState)(!1),A=Object(d.a)(C,2),k=A[0],R=A[1],T=Object(r.useState)([]),S=Object(d.a)(T,2),F=S[0],V=S[1];function D(){R(!1),_(new Map)}function I(){return P.apply(this,arguments)}function P(){return(P=Object(s.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:(t=e.sent).sort((function(e,a){return a.dateAsTimeStamp-e.dateAsTimeStamp})),r=t.reduce((function(e,a){var t=e.get(a.date)||[];return t.push(a),e.set(a.date,t),e}),new Map),i(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){I()}),[]);var M=Object(r.useState)(""),z=Object(d.a)(M,2),B=z[0],J=z[1];function L(e){a.deleteReceipt(e).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I();case 1:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar o recibo por um erro inesperado."),console.log(e)}))}return n.a.createElement("div",{className:"receipts-card"},!k&&n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",null,n.a.createElement("i",{className:"fas fa-home"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Recibos Facil"),n.a.createElement("div",{className:"top-app-bar__right-part"},n.a.createElement("i",{className:"fas fa-ellipsis-v",onClick:function(){return g(!0)}}),n.a.createElement("input",{type:"search",name:"search",placeholder:"Pesquise por nome",id:"search",className:"search",value:B,onChange:function(e){return J(e.target.value)}}))),k&&n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",null,n.a.createElement("i",{onClick:D,className:"fas fa-times"}))),n.a.createElement("div",{className:"top-app-bar__title"},0===j.size&&"Selecionar recibos",j.size>0&&j.size),n.a.createElement("div",{className:"top-app-bar__right-part"},j.size>0&&n.a.createElement("div",null,n.a.createElement("i",{className:"fas fa-clone",onClick:function(){a.batchAdd(j.values()).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(),D();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel clonar os recibo selecionados."),console.log(e)}))}}),n.a.createElement("i",{className:"fas fa-trash",onClick:function(){a.batchDelete(j.keys()).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(),D();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar os recibos por um erro inesperado."),console.log(e)}))}})))),n.a.createElement(E,{show:x,handleClose:function(){g(!1)}},n.a.createElement("a",{onClick:function(){R(!0),g(!1)}},"Selecionar recibos"),n.a.createElement("br",null)),n.a.createElement(E,{show:v,handleClose:function(){b(!1)}},n.a.createElement("a",null,"Duplicar todos com a data corrente"),n.a.createElement("br",null),n.a.createElement("a",null,"Selecionar todos"),n.a.createElement("br",null),n.a.createElement("a",null,"Maximizar"),n.a.createElement("br",null),n.a.createElement("a",null,"Minimizar"),n.a.createElement("br",null)),l&&Object(p.a)(l.keys()).map((function(e,a){var t=l.get(e)||[],r=h(e);return n.a.createElement("div",{className:"receipts-by-month-container",key:e},n.a.createElement("div",{className:"receipts-by-month__header"},n.a.createElement("div",{className:"receipts-by-month__header__left"},n.a.createElement("i",{className:"fas "+(F[a]?"fa-chevron-right ":"fa-chevron-down "),onClick:function(){return function(e,a){var t=F.slice();t[e]=a,V(t)}(a,!F[a])}}),n.a.createElement("span",{className:"receipts-by-month__title"},r),n.a.createElement("span",{className:"receipts-by-month__details"},t.length)),n.a.createElement("div",{className:"receipts-by-month__header__right"},n.a.createElement("i",{className:"fas fa-ellipsis-v receipts-by-month__menu",onClick:function(){return b(!0)}}))),n.a.createElement("div",{className:"receipts-by-month__list"},t.map((function(e){return!F[a]&&(!B||e.payerName&&e.payerName.includes(B)?n.a.createElement(m,{receipt:e,onRemove:L,isSelectable:k,isSelected:void 0!==j.get(e.id),onSelectionChangeFunc:function(a){return function(e,a){_(new Map(j).set(e,a))}(e.id,e)}}):void 0)}))))})))},b=t(16),y=(t(31),t(10)),N=t(11),x=function(){function e(){Object(y.a)(this,e),this.id=void 0,this.payerName=void 0,this.payerAddress=void 0,this.referrerTo=void 0,this.paidValue=void 0,this.paidValueAsText=void 0,this.date=void 0,this.payeeName=void 0,this.payeeCpfOrRg=void 0,this.payeeAddress=void 0}return Object(N.a)(e,[{key:"dateAsTimeStamp",get:function(){return this.date?new Date(this.date).getTime():9007199254740991}}]),e}(),g=function(e){var a=e.database,t=Object(r.useState)(new x),c=Object(d.a)(t,2),l=c[0],i=c[1],p=Object(r.useState)(!1),u=Object(d.a)(p,2),m=u[0],f=u[1];Object(r.useEffect)((function(){e.receiptId&&(f(!0),a.getReceipt(e.receiptId).then((function(e){i(e)})).catch((function(e){alert("N\xe3o foi poss\xedvel carregar o recibo."),console.log(e)})))}),[e.receiptId]);var h=function(){var t=Object(s.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new x).payerName=l.payerName,r.payerAddress=l.payerAddress,r.referrerTo=l.referrerTo,r.paidValue=l.paidValue,r.paidValueAsText=l.paidValueAsText,r.date=l.date,r.payeeName=l.payeeName,r.payeeCpfOrRg=l.payeeCpfOrRg,r.payeeAddress=l.payeeAddress,!m||!e.toClone){t.next=15;break}return t.next=13,a.addReceipt(r);case 13:t.next=22;break;case 15:if(!m){t.next=20;break}return t.next=18,a.updateReceipt(r,e.receiptId);case 18:t.next=22;break;case 20:return t.next=22,a.addReceipt(r);case 22:window.location.hash="#receipt-list";case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(e){var a=e.target,t=a.name,r=a.value;i((function(e){var a=Object(b.a)({},e);return a[t]=r,a}))};return n.a.createElement("div",{className:"new-receipt"},n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",{onClick:function(){return window.history.back()}},n.a.createElement("i",{className:"fas fa-arrow-left"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Recibo"),!m&&n.a.createElement("div",{className:"top-app-bar__right-part"},n.a.createElement("a",{onClick:function(){window.location.hash="#receipt-list"}},n.a.createElement("i",{className:"fas fa-times top-app-bar__icon"})))),n.a.createElement("form",{className:"receipt-form",name:"receipt-form",action:"javascript:void(0);",noValidate:!0},n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("h3",null,"Recebido de"),n.a.createElement("label",{htmlFor:"payerName"},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerName",placeholder:"",id:"payerName",value:l.payerName,onChange:E,autoFocus:!0}),n.a.createElement("label",{htmlFor:"referrerTo"},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo",placeholder:"",id:"referrerTo",value:l.referrerTo,onChange:E}),n.a.createElement("label",{htmlFor:"paidValue"},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"number",name:"paidValue",placeholder:"",id:"paidValue",value:l.paidValue,onChange:E})),n.a.createElement("label",{htmlFor:"payerAddress"},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress",placeholder:"",id:"payerAddress",value:l.payerAddress,onChange:E}),n.a.createElement("div",{className:"receipt-header"}),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date"},"Data"),n.a.createElement("input",{className:"u-full-width",type:"date",name:"date",placeholder:"",id:"date",value:l.date,onChange:E})),n.a.createElement("div",{className:"receipt-payee top-padding"},n.a.createElement("h3",null,"Recebido por"),n.a.createElement("div",{className:"emitentCpf"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeName"},"Emitente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeName",placeholder:"",id:"payeeName",value:l.payeeName,onChange:E})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeCpfOrRg"},"CPF/RG"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg",placeholder:"",id:"payeeCpfOrRg",value:l.payeeCpfOrRg,onChange:E}))),n.a.createElement("label",{htmlFor:"payeeAddress"},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress",placeholder:"",id:"payeeAddress",value:l.payeeAddress,onChange:E})),n.a.createElement("div",{className:"action-bar"},n.a.createElement("button",{onClick:function(){return h()}},"Pronto"))))},w=(t(13),Object(u.a)((function(e){return n.a.createElement("div",{className:"receipt-container"},n.a.createElement("div",{className:"receipt-header"},n.a.createElement("span",null,"RECIBO"),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(a){return e.receipt.paidValue=a.target.value}}))),n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(a){return e.receipt.payer=a.target.value}}),n.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(a){return e.receipt.payerAddress=a.target.value}}),n.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(a){return e.receipt.paidValueAsText=a.target.value}}),n.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(a){return e.receipt.referrerTo=a.target.value}})),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})),n.a.createElement("div",{className:"receipt-payee"},n.a.createElement("div",{className:"emitentCpf"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payee-"+e.index},"Emitente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payee-"+e.index,placeholder:"",id:"payee-"+e.index,value:e.payee,readOnly:!0})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeCpfOrRg-"+e.index},"CPF/RG"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg-"+e.index,placeholder:"",id:"payeeCpfOrRg-"+e.index,value:e.payeeCpfOrRg,readOnly:!0}))),n.a.createElement("label",{htmlFor:"payeeAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress-"+e.index,placeholder:"",id:"payeeAddress-"+e.index,value:e.payeeAddress,readOnly:!0}),n.a.createElement("label",{htmlFor:"payeeSignature-"+e.index},"Assinatura"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeSignature-"+e.index,placeholder:"",id:"payeeSignature-"+e.index})))}))),O=Object(u.a)((function(e){return n.a.createElement("div",{className:"receipt-container"},n.a.createElement("div",{className:"receipt-header"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(a){return e.receipt.paidValue=a.target.value}}))),n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(a){return e.receipt.payer=a.target.value}}),n.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(a){return e.receipt.payerAddress=a.target.value}}),n.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(a){return e.receipt.paidValueAsText=a.target.value}}),n.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(a){return e.receipt.referrerTo=a.target.value}})),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})))})),j=(t(32),function(e){var a=e.database,t=Object(r.useState)([]),c=Object(d.a)(t,2),l=c[0],i=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.createElement("div",{className:"receipt-to-print-list"},n.a.createElement("header",{className:"top-app-bar no-printable"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",{onClick:function(){return window.history.back()}},n.a.createElement("i",{className:"fas fa-arrow-left"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Imprimir")),n.a.createElement("div",{className:"action-top-bar"},n.a.createElement("button",{className:"button-primary no-printable",onClick:window.print},"Imprimir")),n.a.createElement("div",{className:""},n.a.createElement("h2",null,"Canhotos"),l.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(O,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))})),n.a.createElement("h2",null,"Recibos"),l.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(w,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))}))))}),_=t(4),C=t(14),A=Object(C.a)("db"),k=function(){function e(){Object(y.a)(this,e),Object.defineProperty(this,A,{writable:!0,value:void 0})}return Object(N.a)(e,[{key:"connect",value:function(){var e=this;return new Promise((function(a,t){var r=indexedDB.open("EasyReceipts",1);r.onerror=function(e){console.error("error creating/connecting to db",e),t("Failed to connected/create/update DB")},r.onsuccess=function(t){var r;Object(_.a)(e,A)[A]=null===(r=t.target)||void 0===r?void 0:r.result,console.info("connected successfuly to DB"),a("Connected")},r.onupgradeneeded=function(a){var t;Object(_.a)(e,A)[A]=null===(t=a.target)||void 0===t?void 0:t.result,Object(_.a)(e,A)[A].createObjectStore("receipt",{autoIncrement:!0})}}))}},{key:"addReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(_.a)(a,A)[A].transaction(["receipt"],"readwrite");n.oncomplete=function(e){console.log("Transaction do add is done",e)},n.onerror=function(e){console.log("Transaction to add erros",e),r("Failed to add")},n.objectStore("receipt").add(e).onsuccess=function(e){console.log("Receipt created",e),t()}}))}},{key:"updateReceipt",value:function(e,a){var t=this;return new Promise((function(r,n){var c=Object(_.a)(t,A)[A].transaction(["receipt"],"readwrite");c.oncomplete=function(e){console.log("Transaction do update is done",e)},c.onerror=function(e){console.log("Transaction to update has erros",e),n("Failed to update")},c.objectStore("receipt").put(e,a).onsuccess=function(e){console.log("Receipt created",e),r()}}))}},{key:"deleteReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(_.a)(a,A)[A].transaction(["receipt"],"readwrite").objectStore("receipt").delete(e);n.onsuccess=function(e){t()},n.onerror=function(e){console.error("Error on deleting receipt"),r()}}))}},{key:"batchDelete",value:function(e){var a=this;return new Promise((function(t,r){for(var n=Object(_.a)(a,A)[A].transaction(["receipt"],"readwrite"),c=e.next();!c.done;)n.objectStore("receipt").delete(c.value),c=e.next();n.oncomplete=function(e){t()},n.onerror=function(e){console.error("Error on deleting batch of receipts"),r()}}))}},{key:"batchAdd",value:function(e){var a=this;return new Promise((function(t,r){for(var n=Object(_.a)(a,A)[A].transaction(["receipt"],"readwrite"),c=e.next();!c.done;)n.objectStore("receipt").add(c.value),c=e.next();n.oncomplete=function(e){t()},n.onerror=function(e){console.error("Error on adding batch of receipts"),r()}}))}},{key:"getReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(_.a)(a,A)[A].transaction(["receipt"]).objectStore("receipt").get(e);n.onerror=function(e){console.error("Error on fiding receipt"),r()},n.onsuccess=function(e){n.result||(console.warn("Receipt not found"),t(new x)),t(n.result)}}))}},{key:"getAllReceipts",value:function(){var e=this;return new Promise((function(a,t){var r=Object(_.a)(e,A)[A].transaction(["receipt"]).objectStore("receipt"),n=[];r.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var r=new x;r.payerName=t.value.payerName,r.payerAddress=t.value.payerAddress,r.referrerTo=t.value.referrerTo,r.paidValue=t.value.paidValue,r.paidValueAsText=t.value.paidValueAsText,r.date=t.value.date,r.payeeName=t.value.payeeName,r.payeeCpfOrRg=t.value.payeeCpfOrRg,r.payeeAddress=t.value.payeeAddress,r.id=t.key,n.push(r),t.continue()}else console.log("No more entries!"),a(n)}}))}},{key:"db",value:function(){return Object(_.a)(this,A)[A]}}]),e}();function R(){var e=window.location.hash.substr(1).split("/");return{first:e[0]||"",second:e[1]||""}}var T=function(){var e=Object(r.useState)(!0),a=Object(d.a)(e,2),t=a[0],c=a[1],l=Object(r.useState)(R().first),i=Object(d.a)(l,2),p=i[0],u=i[1],m=Object(r.useState)(parseInt(R().second)),f=Object(d.a)(m,2),h=f[0],E=f[1];window.onhashchange=function(){u(R().first),E(parseInt(R().second))};var b=Object(r.useState)(new k),y=Object(d.a)(b,2),N=y[0];y[1];return Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.connect();case 2:c(!1),window.Database=N;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.createElement("div",{className:"rootApp"},n.a.createElement("main",null,t?n.a.createElement("span",null,"Loading"):p&&"receipt-list"!==p?"receipt-clone"===p&&h?n.a.createElement(g,{receiptId:h,database:N,toClone:!0}):"receipt"===p&&h?n.a.createElement(g,{receiptId:h,database:N}):"receipt"===p?n.a.createElement(g,{database:N}):"receipts-to-print"===p?n.a.createElement(j,{database:N}):"NOTFOUND":n.a.createElement(v,{database:N})),n.a.createElement("footer",{className:"bottom-app-bar"},n.a.createElement("a",{href:"#receipt-list"},n.a.createElement("i",{className:"fas fa-list "+("receipt-list"==p||""==p?"opacity-half":"")})),n.a.createElement("a",{href:"#receipt"},n.a.createElement("i",{className:"fas fa-plus-square "+("receipt"==p?"opacity-half":"")})),n.a.createElement("a",{href:"#receipts-to-print"},n.a.createElement("i",{className:"fas fa-print  "+("receipts-to-print"==p?"opacity-half":"")}))))};l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(T,null)),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.491670d8.chunk.js.map