(this.webpackJsonpeasyreceipts=this.webpackJsonpeasyreceipts||[]).push([[0],[,,,,,,,,,,,,,function(e,a,t){},,,,,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(8),i=t.n(c),l=(t(21),t(3)),o=t.n(l),s=t(5),d=t(2),p=(t(23),t(24),t(25),t(26),t(15)),u=(t(27),{0:"Janeiro",1:"Fevereiro",2:"Mar\xe7o",3:"Abril",4:"Maio",5:"Junho",6:"Julho",7:"Agosto",8:"Setembro",9:"Outubro",10:"Novembro",11:"Dezembro"});var m=function(e){if(e){var a=new Date(e),t=a.getFullYear(),r=u[a.getMonth()];return(new Date).getFullYear()===t?r:r+" de "+t}},f=t(6),h=(t(28),Object(f.a)((function(e){return n.a.createElement("div",{className:"receipt-card"},n.a.createElement("div",{className:"receipt-card__header"},n.a.createElement("h3",{className:"receipt-card__title"},e.receipt.payerName||"..."),n.a.createElement("div",{className:"receipt-card__check_container"},n.a.createElement("div",{className:"receipt-card__check",onClick:function(){return e.onSelectionChange(!e.isSelected)}},e.enableSelection&&n.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},n.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),e.isSelected&&n.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},n.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))))),n.a.createElement("div",{className:"receipt-card__content"},n.a.createElement("p",null,e.receipt.referrerTo||"..."),n.a.createElement("span",{className:"receipt-card__price"},"R$ ",e.receipt.paidValue||"?")),n.a.createElement("div",{className:"receipt-card__bottom"},n.a.createElement("div",{className:"receipt-card__number"},n.a.createElement("span",null,"N\xba 121212")),n.a.createElement("div",{className:"line-separator"}),n.a.createElement("div",{className:"receipt-card__action-bar"},n.a.createElement("a",{className:"receipt-card__button",href:"#receipt/"+e.receipt.id},n.a.createElement("i",{className:"fas fa-edit"})),n.a.createElement("a",{className:"receipt-card__button",href:"#receipt-clone/"+e.receipt.id},n.a.createElement("i",{className:"fas fa-clone"})),n.a.createElement("a",{className:"receipt-card__button",onClick:function(){!0===window.confirm("Realmente deseja remover esse recibo?")&&e.onRemove(e.receipt.id)}},n.a.createElement("i",{className:"fas fa-trash"})))))}))),v=(t(30),function(e){var a=e.show?"modal display-block":"modal display-none";return n.a.createElement("div",{className:a},n.a.createElement("section",{className:"modal-main"},e.children,n.a.createElement("a",{onClick:e.handleClose},"Cancelar"),n.a.createElement("br",null)))}),E=function(e){var a=Object(r.useState)(!1),t=Object(d.a)(a,2),c=t[0],i=t[1],l=Object(r.useState)(),o=Object(d.a)(l,2),s=o[0],p=o[1];return n.a.createElement("div",{className:"receipts-by-month-container",key:e.title},n.a.createElement(v,{show:s,handleClose:function(){p(!1)}},n.a.createElement("a",{onClick:function(){e.onSelectAll(e.receipts),p(!1)}},"Selecionar todos"),n.a.createElement("br",null)),n.a.createElement("div",{className:"receipts-by-month__header"},n.a.createElement("div",{className:"receipts-by-month__header__left"},n.a.createElement("i",{className:"fas "+(c?"fa-chevron-right ":"fa-chevron-down "),onClick:function(){return i(!c)}}),n.a.createElement("span",{className:"receipts-by-month__title"},e.title),n.a.createElement("span",{className:"receipts-by-month__details"},e.receipts.length)),n.a.createElement("div",{className:"receipts-by-month__header__right"},n.a.createElement("i",{className:"fas fa-ellipsis-v receipts-by-month__menu",onClick:function(){return p(!0)}}))),n.a.createElement("div",{className:"receipts-by-month__list"},e.receipts.map((function(a){return!c&&(!e.payerNameFiltering||a.payerName&&a.payerName.includes(e.payerNameFiltering)?n.a.createElement(h,{receipt:a,onRemove:e.onRemove,enableSelection:e.enableSelection,isSelected:void 0!==e.receiptsSelected.get(a.id),onSelectionChange:function(t){return e.onSelectionChange(a.id,t?a:void 0)}}):void 0)}))))},b=function(e){var a=Object(r.useState)(),t=Object(d.a)(a,2),c=t[0],i=t[1];return n.a.createElement("div",null,n.a.createElement(v,{show:c,handleClose:function(){i(!1)}},n.a.createElement("a",{onClick:function(){e.onClickToEnableSelectMode(),i(!1)}},"Selecionar recibos"),n.a.createElement("br",null)),!e.isSelectModeOn&&n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",null,n.a.createElement("i",{className:"fas fa-home"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Recibos Facil"),n.a.createElement("div",{className:"top-app-bar__right-part"},n.a.createElement("i",{className:"fas fa-ellipsis-v",onClick:function(){return i(!0)}}),n.a.createElement("input",{type:"search",name:"search",placeholder:"Pesquise por nome",id:"search",className:"search",onChange:function(a){return e.onChangeOfPayerNameToFilter(a.target.value)}}))),e.isSelectModeOn&&n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",null,n.a.createElement("i",{onClick:function(){e.onClickToDisableSelectMode()},className:"fas fa-times"}))),n.a.createElement("div",{className:"top-app-bar__title"},0===e.receiptsSelected.size&&"Selecionar recibos",e.receiptsSelected.size>0&&e.receiptsSelected.size),n.a.createElement("div",{className:"top-app-bar__right-part"},e.receiptsSelected.size>0&&n.a.createElement("div",null,n.a.createElement("i",{className:"fas fa-clone",onClick:e.onClickToCloneSelectedReceipts}),n.a.createElement("i",{className:"fas fa-trash",onClick:e.onClickToDeleteSelectedReceipts})))))},y=function(e){var a=e.database,t=Object(r.useState)(),c=Object(d.a)(t,2),i=c[0],l=c[1],u=Object(r.useState)(new Map),f=Object(d.a)(u,2),h=f[0],v=f[1],y=Object(r.useState)(!1),N=Object(d.a)(y,2),x=N[0],g=N[1];function w(e){var a=new Map(h);e.map((function(e){a.set(e.id,e)})),v(a),g(!0)}function O(e,a){if(a)v(new Map(h).set(e,a));else{var t=new Map(h);t.delete(e),v(t)}}function C(){g(!1),v(new Map)}function _(){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:(t=e.sent).sort((function(e,a){return a.dateAsTimeStamp-e.dateAsTimeStamp})),r=t.reduce((function(e,a){var t=e.get(a.date)||[];return t.push(a),e.set(a.date,t),e}),new Map),l(r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){_()}),[]);var A=Object(r.useState)(""),S=Object(d.a)(A,2),k=S[0],R=S[1];function T(e){a.deleteReceipt(e).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_();case 1:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar o recibo por um erro inesperado."),console.log(e)}))}return n.a.createElement("div",{className:"receipts-card"},n.a.createElement(b,{isSelectModeOn:x,onChangeOfPayerNameToFilter:R,onClickToCloneSelectedReceipts:function(){var e=h.values();if(!0===window.confirm("Confirma a duplica\xe7\xe3o de ".concat(h.size," recibos?"))){for(var t=[],r=e.next();!r.done;){var n=r.value;n.date=void 0,t.push(n),r=e.next()}a.arrayAdd(t).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(),C();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel clonar os recibo selecionados."),console.log(e)}))}},onClickToDeleteSelectedReceipts:function(){!0===window.confirm("Confirma a dele\xe7\xe3o de ".concat(h.size," recibos?"))&&a.batchDelete(h.keys()).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(),C();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar os recibos por um erro inesperado."),console.log(e)}))},onClickToDisableSelectMode:C,onClickToEnableSelectMode:function(){return g(!0)},receiptsSelected:h}),i&&Object(p.a)(i.keys()).map((function(e,a){var t=i.get(e)||[],r=m(e)||"\xc1rea de trabalho (sem data ou clonado)";return n.a.createElement(E,{title:r,receipts:t,enableSelection:x,receiptsSelected:h,payerNameFiltering:k,onRemove:T,onSelectionChange:O,onSelectAll:w})})))},N=t(16),x=(t(31),t(10)),g=t(11),w=function(){function e(){Object(x.a)(this,e),this.id=void 0,this.payerName=void 0,this.payerAddress=void 0,this.referrerTo=void 0,this.paidValue=void 0,this.paidValueAsText=void 0,this.date=void 0,this.payeeName=void 0,this.payeeCpfOrRg=void 0,this.payeeAddress=void 0}return Object(g.a)(e,[{key:"dateAsTimeStamp",get:function(){return this.date?new Date(this.date).getTime():9007199254740991}}]),e}(),O=function(e){var a=e.database,t=Object(r.useState)(new w),c=Object(d.a)(t,2),i=c[0],l=c[1],p=Object(r.useState)("create"),u=Object(d.a)(p,2),m=u[0],f=u[1];Object(r.useEffect)((function(){e.receiptId?(e.toClone?f("clone"):f("edit"),a.getReceipt(e.receiptId).then((function(e){l(e)})).catch((function(e){alert("N\xe3o foi poss\xedvel carregar o recibo."),console.log(e)}))):f("create")}),[e.receiptId]);var h=function(){var t=Object(s.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new w).payerName=i.payerName,r.payerAddress=i.payerAddress,r.referrerTo=i.referrerTo,r.paidValue=i.paidValue,r.paidValueAsText=i.paidValueAsText,r.date=i.date,r.payeeName=i.payeeName,r.payeeCpfOrRg=i.payeeCpfOrRg,r.payeeAddress=i.payeeAddress,"clone"!==m){t.next=13;break}return t.next=13,a.addReceipt(r);case 13:if("edit"!==m){t.next=16;break}return t.next=16,a.updateReceipt(r,e.receiptId);case 16:if("create"!==m){t.next=19;break}return t.next=19,a.addReceipt(r);case 19:window.location.hash="#receipt-list";case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(e){var a=e.target,t=a.name,r=a.value;l((function(e){var a=Object(N.a)({},e);return a[t]=r,a}))};return n.a.createElement("div",{className:"new-receipt"},n.a.createElement("header",{className:"top-app-bar"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",{onClick:function(){return window.history.back()}},n.a.createElement("i",{className:"fas fa-arrow-left"}))),n.a.createElement("div",{className:"top-app-bar__title"},"create"===m&&"Criando","edit"===m&&"Editando","clone"===m&&"Clonando"),"create"==m&&n.a.createElement("div",{className:"top-app-bar__right-part"},n.a.createElement("a",{onClick:function(){window.location.hash="#receipt-list"}},n.a.createElement("i",{className:"fas fa-times top-app-bar__icon"})))),n.a.createElement("form",{className:"receipt-form",name:"receipt-form",action:"javascript:void(0);",noValidate:!0},n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("h5",null,"Recebido de"),n.a.createElement("label",{htmlFor:"payerName"},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerName",placeholder:"",id:"payerName",value:i.payerName,onChange:v,autoFocus:!0}),n.a.createElement("label",{htmlFor:"referrerTo"},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo",placeholder:"",id:"referrerTo",value:i.referrerTo,onChange:v}),n.a.createElement("label",{htmlFor:"paidValue"},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"number",name:"paidValue",placeholder:"",id:"paidValue",value:i.paidValue,onChange:v})),n.a.createElement("label",{htmlFor:"payerAddress"},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress",placeholder:"",id:"payerAddress",value:i.payerAddress,onChange:v}),n.a.createElement("div",{className:"receipt-header"}),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date"},"Data"),n.a.createElement("input",{className:"u-full-width",type:"date",name:"date",placeholder:"",id:"date",value:i.date,onChange:v})),n.a.createElement("div",{className:"receipt-payee top-padding"},n.a.createElement("h5",null,"Recebido por"),n.a.createElement("div",{className:"emitentCpf"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeName"},"Emitente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeName",placeholder:"",id:"payeeName",value:i.payeeName,onChange:v})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeCpfOrRg"},"CPF/RG"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg",placeholder:"",id:"payeeCpfOrRg",value:i.payeeCpfOrRg,onChange:v}))),n.a.createElement("label",{htmlFor:"payeeAddress"},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress",placeholder:"",id:"payeeAddress",value:i.payeeAddress,onChange:v})),n.a.createElement("div",{className:"action-bar"},n.a.createElement("button",{onClick:function(){return h()}},"Pronto"))))},C=(t(13),Object(f.a)((function(e){return n.a.createElement("div",{className:"receipt-container"},n.a.createElement("div",{className:"receipt-header"},n.a.createElement("span",null,"RECIBO"),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(a){return e.receipt.paidValue=a.target.value}}))),n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(a){return e.receipt.payer=a.target.value}}),n.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(a){return e.receipt.payerAddress=a.target.value}}),n.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(a){return e.receipt.paidValueAsText=a.target.value}}),n.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(a){return e.receipt.referrerTo=a.target.value}})),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})),n.a.createElement("div",{className:"receipt-payee"},n.a.createElement("div",{className:"emitentCpf"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payee-"+e.index},"Emitente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payee-"+e.index,placeholder:"",id:"payee-"+e.index,value:e.payee,readOnly:!0})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"payeeCpfOrRg-"+e.index},"CPF/RG"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg-"+e.index,placeholder:"",id:"payeeCpfOrRg-"+e.index,value:e.payeeCpfOrRg,readOnly:!0}))),n.a.createElement("label",{htmlFor:"payeeAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress-"+e.index,placeholder:"",id:"payeeAddress-"+e.index,value:e.payeeAddress,readOnly:!0}),n.a.createElement("label",{htmlFor:"payeeSignature-"+e.index},"Assinatura"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeSignature-"+e.index,placeholder:"",id:"payeeSignature-"+e.index})))}))),_=Object(f.a)((function(e){return n.a.createElement("div",{className:"receipt-container"},n.a.createElement("div",{className:"receipt-header"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(a){return e.receipt.paidValue=a.target.value}}))),n.a.createElement("div",{className:"receipt-payer"},n.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(a){return e.receipt.payer=a.target.value}}),n.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(a){return e.receipt.payerAddress=a.target.value}}),n.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(a){return e.receipt.paidValueAsText=a.target.value}}),n.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(a){return e.receipt.referrerTo=a.target.value}})),n.a.createElement("div",{className:"receipt-date"},n.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),n.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})))})),j=(t(32),function(e){var a=e.database,t=Object(r.useState)([]),c=Object(d.a)(t,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getAllReceipts();case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.createElement("div",{className:"receipt-to-print-list"},n.a.createElement("header",{className:"top-app-bar no-printable"},n.a.createElement("div",{className:"top-app-bar__navigation"},n.a.createElement("a",{onClick:function(){return window.history.back()}},n.a.createElement("i",{className:"fas fa-arrow-left"}))),n.a.createElement("div",{className:"top-app-bar__title"},"Imprimir")),n.a.createElement("div",{className:"action-top-bar"},n.a.createElement("button",{className:"button-primary no-printable",onClick:window.print},"Imprimir")),n.a.createElement("div",{className:""},n.a.createElement("h2",null,"Canhotos"),i.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(_,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))})),n.a.createElement("h2",null,"Recibos"),i.map((function(e){return n.a.createElement("div",{key:e.id},n.a.createElement(C,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))}))))}),A=t(4),S=t(14),k=Object(S.a)("db"),R=function(){function e(){Object(x.a)(this,e),Object.defineProperty(this,k,{writable:!0,value:void 0})}return Object(g.a)(e,[{key:"connect",value:function(){var e=this;return new Promise((function(a,t){var r=indexedDB.open("EasyReceipts",1);r.onerror=function(e){console.error("error creating/connecting to db",e),t("Failed to connected/create/update DB")},r.onsuccess=function(t){var r;Object(A.a)(e,k)[k]=null===(r=t.target)||void 0===r?void 0:r.result,console.info("connected successfuly to DB"),a("Connected")},r.onupgradeneeded=function(a){var t;Object(A.a)(e,k)[k]=null===(t=a.target)||void 0===t?void 0:t.result,Object(A.a)(e,k)[k].createObjectStore("receipt",{autoIncrement:!0})}}))}},{key:"addReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(A.a)(a,k)[k].transaction(["receipt"],"readwrite");n.oncomplete=function(e){console.log("Transaction do add is done",e)},n.onerror=function(e){console.log("Transaction to add erros",e),r("Failed to add")},n.objectStore("receipt").add(e).onsuccess=function(e){console.log("Receipt created",e),t()}}))}},{key:"updateReceipt",value:function(e,a){var t=this;return new Promise((function(r,n){var c=Object(A.a)(t,k)[k].transaction(["receipt"],"readwrite");c.oncomplete=function(e){console.log("Transaction do update is done",e)},c.onerror=function(e){console.log("Transaction to update has erros",e),n("Failed to update")},c.objectStore("receipt").put(e,a).onsuccess=function(e){console.log("Receipt created",e),r()}}))}},{key:"deleteReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(A.a)(a,k)[k].transaction(["receipt"],"readwrite").objectStore("receipt").delete(e);n.onsuccess=function(e){t()},n.onerror=function(e){console.error("Error on deleting receipt"),r()}}))}},{key:"batchDelete",value:function(e){var a=this;return new Promise((function(t,r){for(var n=Object(A.a)(a,k)[k].transaction(["receipt"],"readwrite"),c=e.next();!c.done;)n.objectStore("receipt").delete(c.value),c=e.next();n.oncomplete=function(e){t()},n.onerror=function(e){console.error("Error on deleting batch of receipts"),r()}}))}},{key:"batchAdd",value:function(e){var a=this;return new Promise((function(t,r){for(var n=Object(A.a)(a,k)[k].transaction(["receipt"],"readwrite"),c=e.next();!c.done;)n.objectStore("receipt").add(c.value),c=e.next();n.oncomplete=function(e){t()},n.onerror=function(e){console.error("Error on adding batch of receipts"),r()}}))}},{key:"arrayAdd",value:function(e){var a=this;return new Promise((function(t,r){for(var n=Object(A.a)(a,k)[k].transaction(["receipt"],"readwrite"),c=0;c<e.length;c++)n.objectStore("receipt").add(e[c]);n.oncomplete=function(e){t()},n.onerror=function(e){console.error("Error on adding batch of receipts"),r()}}))}},{key:"getReceipt",value:function(e){var a=this;return new Promise((function(t,r){var n=Object(A.a)(a,k)[k].transaction(["receipt"]).objectStore("receipt").get(e);n.onerror=function(e){console.error("Error on fiding receipt"),r()},n.onsuccess=function(e){n.result||(console.warn("Receipt not found"),t(new w)),t(n.result)}}))}},{key:"getAllReceipts",value:function(){var e=this;return new Promise((function(a,t){var r=Object(A.a)(e,k)[k].transaction(["receipt"]).objectStore("receipt"),n=[];r.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var r=new w;r.payerName=t.value.payerName,r.payerAddress=t.value.payerAddress,r.referrerTo=t.value.referrerTo,r.paidValue=t.value.paidValue,r.paidValueAsText=t.value.paidValueAsText,r.date=t.value.date,r.payeeName=t.value.payeeName,r.payeeCpfOrRg=t.value.payeeCpfOrRg,r.payeeAddress=t.value.payeeAddress,r.id=t.key,n.push(r),t.continue()}else console.log("No more entries!"),a(n)}}))}},{key:"db",value:function(){return Object(A.a)(this,k)[k]}}]),e}();function T(){var e=window.location.hash.substr(1).split("/");return{first:e[0]||"",second:e[1]||""}}var F=function(){var e=Object(r.useState)(!0),a=Object(d.a)(e,2),t=a[0],c=a[1],i=Object(r.useState)(T().first),l=Object(d.a)(i,2),p=l[0],u=l[1],m=Object(r.useState)(parseInt(T().second)),f=Object(d.a)(m,2),h=f[0],v=f[1];window.onhashchange=function(){u(T().first),v(parseInt(T().second))};var E=Object(r.useState)(new R),b=Object(d.a)(E,2),N=b[0];b[1];return Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.connect();case 2:c(!1),window.Database=N;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.createElement("div",{className:"rootApp"},n.a.createElement("main",null,t?n.a.createElement("span",null,"Loading"):p&&"receipt-list"!==p?"receipt-clone"===p&&h?n.a.createElement(O,{receiptId:h,database:N,toClone:!0}):"receipt"===p&&h?n.a.createElement(O,{receiptId:h,database:N}):"receipt"===p?n.a.createElement(O,{database:N}):"receipts-to-print"===p?n.a.createElement(j,{database:N}):"NOTFOUND":n.a.createElement(y,{database:N})),n.a.createElement("footer",{className:"bottom-app-bar"},n.a.createElement("a",{href:"#receipt-list",className:"bottom-app-bar_icon"},n.a.createElement("i",{className:"fas fa-list "+("receipt-list"==p||""==p?"opacity-half":"")}),n.a.createElement("span",null,"Lista")),n.a.createElement("a",{href:"#receipt",className:"bottom-app-bar_icon"},n.a.createElement("i",{className:"fas fa-plus-square "+("receipt"==p?"opacity-half":"")}),n.a.createElement("span",null,"Novo")),n.a.createElement("a",{href:"#receipts-to-print",className:"bottom-app-bar_icon"},n.a.createElement("i",{className:"fas fa-print  "+("receipts-to-print"==p?"opacity-half":"")}),n.a.createElement("span",null,"Imprimir"))))};i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(F,null)),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.abdafdc6.chunk.js.map