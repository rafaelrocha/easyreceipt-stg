(this.webpackJsonpeasyreceipts=this.webpackJsonpeasyreceipts||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),l=(a(21),a(3)),o=a.n(l),s=a(4),d=a(2),u=(a(23),a(24),a(25),a(26),a(16)),p=(a(27),{0:"Janeiro",1:"Fevereiro",2:"Mar\xe7o",3:"Abril",4:"Maio",5:"Junho",6:"Julho",7:"Agosto",8:"Setembro",9:"Outubro",10:"Novembro",11:"Dezembro"});var m,f,h=function(e){if(e){var t=new Date(e),a=t.getFullYear(),n=p[t.getMonth()];return(new Date).getFullYear()===a?n:n+" de "+a}},v=a(8),y=(a(28),Object(v.a)((function(e){return r.a.createElement("div",{className:"receipt-card"},r.a.createElement("div",{className:"receipt-card__header"},r.a.createElement("h3",{className:"receipt-card__title"},e.receipt.payerName||"..."),r.a.createElement("div",{className:"receipt-card__check_container"},r.a.createElement("div",{className:"receipt-card__check",onClick:function(){return e.onSelectionChange(!e.isSelected)}},e.enableSelection&&r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),e.isSelected&&r.a.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",className:"receipt-card__check"},r.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))))),r.a.createElement("div",{className:"receipt-card__content"},r.a.createElement("p",null,e.receipt.referrerTo||"..."),r.a.createElement("span",{className:"receipt-card__price"},"R$ ",e.receipt.paidValue||"?")),r.a.createElement("div",{className:"receipt-card__bottom"},r.a.createElement("div",{className:"receipt-card__number"},r.a.createElement("span",null,"N\xba 121212")),r.a.createElement("div",{className:"line-separator"}),r.a.createElement("div",{className:"receipt-card__action-bar"},r.a.createElement("a",{className:"receipt-card__button",href:"#receipt/"+e.receipt.id},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("a",{className:"receipt-card__button",href:"#receipt-clone/"+e.receipt.id},r.a.createElement("i",{className:"fas fa-clone"})),r.a.createElement("a",{className:"receipt-card__button",onClick:function(){!0===window.confirm("Realmente deseja remover esse recibo?")&&e.onRemove(e.receipt.id)}},r.a.createElement("i",{className:"fas fa-trash"})))))}))),b=(a(30),function(e){var t=e.show?"modal display-block":"modal display-none";return r.a.createElement("div",{className:t},r.a.createElement("section",{className:"modal-main"},e.children,r.a.createElement("a",{onClick:e.handleClose},"Cancelar")))}),E=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(),o=Object(d.a)(l,2),s=o[0],u=o[1];return r.a.createElement("div",{className:"receipts-by-month-container",key:e.title},r.a.createElement(b,{show:s,handleClose:function(){u(!1)}},r.a.createElement("a",{onClick:function(){e.onSelectAll(e.receipts),u(!1)}},"Selecionar todos")),r.a.createElement("div",{className:"receipts-by-month__header"},r.a.createElement("div",{className:"receipts-by-month__header__left"},r.a.createElement("i",{className:"fas "+(i?"fa-chevron-right ":"fa-chevron-down "),onClick:function(){return c(!i)}}),r.a.createElement("span",{className:"receipts-by-month__title"},e.title),r.a.createElement("span",{className:"receipts-by-month__details"},e.receipts.length)),r.a.createElement("div",{className:"receipts-by-month__header__right"},r.a.createElement("i",{className:"fas fa-ellipsis-v receipts-by-month__menu",onClick:function(){return u(!0)}}))),r.a.createElement("div",{className:"receipts-by-month__list"},e.receipts.map((function(t){return!i&&(!e.payerNameFiltering||t.payerName&&t.payerName.includes(e.payerNameFiltering)?r.a.createElement(y,{receipt:t,onRemove:e.onRemove,enableSelection:e.enableSelection,isSelected:void 0!==e.receiptsSelected.get(t.id),onSelectionChange:function(a){return e.onSelectionChange(t.id,a?t:void 0)}}):void 0)}))))},N=function(e){var t=Object(n.useState)(),a=Object(d.a)(t,2),i=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(b,{show:i,handleClose:function(){c(!1)}},r.a.createElement("a",{onClick:function(){e.onClickToEnableSelectMode(),c(!1)}},"Selecionar recibos")),!e.isSelectModeOn&&r.a.createElement("header",{className:"top-app-bar"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",null,r.a.createElement("i",{className:"fas fa-home"}))),r.a.createElement("div",{className:"top-app-bar__title"},"Recibos Facil"),r.a.createElement("div",{className:"top-app-bar__right-part"},r.a.createElement("i",{className:"fas fa-ellipsis-v",onClick:function(){return c(!0)}}),r.a.createElement("input",{type:"search",name:"search",placeholder:"Pesquise por nome",id:"search",className:"search",onChange:function(t){return e.onChangeOfPayerNameToFilter(t.target.value)}}))),e.isSelectModeOn&&r.a.createElement("header",{className:"top-app-bar"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",null,r.a.createElement("i",{onClick:function(){e.onClickToDisableSelectMode()},className:"fas fa-times"}))),r.a.createElement("div",{className:"top-app-bar__title"},0===e.receiptsSelected.size&&"Selecionar recibos",e.receiptsSelected.size>0&&e.receiptsSelected.size),r.a.createElement("div",{className:"top-app-bar__right-part"},e.receiptsSelected.size>0&&r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-print",onClick:e.onClickToPrintSelectedReceipts}),r.a.createElement("i",{className:"fas fa-edit",onClick:e.onClickToEditSelectedReceipts}),r.a.createElement("i",{className:"fas fa-clone",onClick:e.onClickToCloneSelectedReceipts}),r.a.createElement("i",{className:"fas fa-trash",onClick:e.onClickToDeleteSelectedReceipts})))))},g=function(e){var t=e.database,a=Object(n.useState)(),i=Object(d.a)(a,2),c=i[0],l=i[1],p=Object(n.useState)(new Map),m=Object(d.a)(p,2),f=m[0],v=m[1],y=Object(n.useState)(!1),b=Object(d.a)(y,2),g=b[0],x=b[1];function w(e){var t=new Map(f);e.map((function(e){t.set(e.id,e)})),v(t),x(!0)}function O(e,t){if(t)v(new Map(f).set(e,t));else{var a=new Map(f);a.delete(e),v(a)}}function S(){x(!1),v(new Map)}function C(){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllReceipts();case 2:(a=e.sent).sort((function(e,t){return t.dateAsTimeStamp-e.dateAsTimeStamp})),n=a.reduce((function(e,t){var a=e.get(t.yearAndMonth)||[];return a.push(t),e.set(t.yearAndMonth,a),e}),new Map),l(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){C()}),[]);var j=Object(n.useState)(""),A=Object(d.a)(j,2),_=A[0],T=A[1];function R(e){t.deleteReceipt(e).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C();case 1:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar o recibo por um erro inesperado."),console.log(e)}))}return r.a.createElement("div",{className:"receipts-card"},r.a.createElement(N,{isSelectModeOn:g,onChangeOfPayerNameToFilter:T,onClickToCloneSelectedReceipts:function(){var e=f.values();if(!0===window.confirm("Confirma a duplica\xe7\xe3o de ".concat(f.size," recibos?"))){for(var a=[],n=e.next();!n.done;){var r=n.value;r.date=void 0,a.push(r),n=e.next()}t.arrayAdd(a).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(),S();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel clonar os recibo selecionados."),console.log(e)}))}},onClickToDeleteSelectedReceipts:function(){!0===window.confirm("Confirma a dele\xe7\xe3o de ".concat(f.size," recibos?"))&&t.batchDelete(f.keys()).then(Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(),S();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){alert("N\xe3o foi poss\xedvel deletar os recibos por um erro inesperado."),console.log(e)}))},onClickToDisableSelectMode:S,onClickToEnableSelectMode:function(){return x(!0)},onClickToPrintSelectedReceipts:function(){return function(){for(var e=f.keys(),t=e.next(),a=new Array;!t.done;)a.push(t.value),t=e.next();window.location.hash="receipts-to-print?receiptIds=".concat(JSON.stringify(a))}()},onClickToEditSelectedReceipts:function(){return function(){for(var e=f.keys(),t=e.next(),a=new Array;!t.done;)a.push(t.value),t=e.next();window.location.hash="#multi-edition?receiptIds=".concat(JSON.stringify(a))}()},receiptsSelected:f}),c&&Object(u.a)(c.keys()).map((function(e,t){var a=c.get(e)||[],n=h(e)||"\xc1rea de trabalho (sem data ou clonado)";return r.a.createElement(E,{title:n,receipts:a,enableSelection:g,receiptsSelected:f,payerNameFiltering:_,onRemove:R,onSelectionChange:O,onSelectAll:w})})))},x=a(12),w=a(6),O=a(7),S=function(){function e(){Object(w.a)(this,e),this.id=void 0,this.payerName=void 0,this.payerAddress=void 0,this.referrerTo=void 0,this.paidValue=void 0,this.paidValueAsText=void 0,this.date=void 0,this.payeeName=void 0,this.payeeCpfOrRg=void 0,this.payeeAddress=void 0}return Object(O.a)(e,[{key:"dateAsTimeStamp",get:function(){return this.date?new Date(this.date).getTime():9007199254740991}},{key:"yearAndMonth",get:function(){if(this.date){var e=new Date(this.date);return"".concat(e.getFullYear(),"-").concat(e.getMonth())}}}]),e}(),C=function(e){var t=e.database,a=Object(n.useState)(new S),i=Object(d.a)(a,2),c=i[0],l=i[1],u=Object(n.useState)("create"),p=Object(d.a)(u,2),m=p[0],f=p[1];Object(n.useEffect)((function(){e.receiptId?(e.toClone?f("clone"):f("edit"),t.getReceipt(e.receiptId).then((function(e){l(e)})).catch((function(e){alert("N\xe3o foi poss\xedvel carregar o recibo."),console.log(e)}))):f("create")}),[e.receiptId]);var h=function(){var a=Object(s.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((n=new S).payerName=c.payerName,n.payerAddress=c.payerAddress,n.referrerTo=c.referrerTo,n.paidValue=c.paidValue,n.paidValueAsText=c.paidValueAsText,n.date=c.date,n.payeeName=c.payeeName,n.payeeCpfOrRg=c.payeeCpfOrRg,n.payeeAddress=c.payeeAddress,"clone"!==m){a.next=13;break}return a.next=13,t.addReceipt(n);case 13:if("edit"!==m){a.next=16;break}return a.next=16,t.updateReceipt(n,e.receiptId);case 16:if("create"!==m){a.next=19;break}return a.next=19,t.addReceipt(n);case 19:window.location.hash="#receipt-list";case 20:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),v=function(e){var t=e.target,a=t.name,n=t.value;l((function(e){var t=Object(x.a)({},e);return t[a]=n,t}))};return r.a.createElement("div",{className:"new-receipt"},r.a.createElement("header",{className:"top-app-bar"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",{onClick:function(){return window.history.back()}},r.a.createElement("i",{className:"fas fa-arrow-left"}))),r.a.createElement("div",{className:"top-app-bar__title"},"create"===m&&"Criando","edit"===m&&"Editando","clone"===m&&"Clonando"),"create"==m&&r.a.createElement("div",{className:"top-app-bar__right-part"},r.a.createElement("a",{onClick:function(){window.location.hash="#receipt-list"}},r.a.createElement("i",{className:"fas fa-times top-app-bar__icon"})))),r.a.createElement("form",{className:"receipt-form",name:"receipt-form",action:"javascript:void(0);",noValidate:!0},r.a.createElement("div",{className:"receipt-payer"},r.a.createElement("h5",null,"Recebido de"),r.a.createElement("label",{htmlFor:"payerName"},"Recebi (emos) de"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payerName",placeholder:"",id:"payerName",value:c.payerName,onChange:v,autoFocus:!0}),r.a.createElement("label",{htmlFor:"referrerTo"},"Referente"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo",placeholder:"",id:"referrerTo",value:c.referrerTo,onChange:v}),r.a.createElement("label",{htmlFor:"paidValue"},"Valor"),r.a.createElement("input",{className:"u-full-width",type:"number",name:"paidValue",placeholder:"",id:"paidValue",value:c.paidValue,onChange:v})),r.a.createElement("label",{htmlFor:"payerAddress"},"Endere\xe7o"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress",placeholder:"",id:"payerAddress",value:c.payerAddress,onChange:v}),r.a.createElement("div",{className:"receipt-header"}),r.a.createElement("div",{className:"receipt-date"},r.a.createElement("label",{htmlFor:"date"},"Data"),r.a.createElement("input",{className:"u-full-width",type:"date",name:"date",placeholder:"",id:"date",value:c.date,onChange:v})),r.a.createElement("div",{className:"receipt-payee top-padding"},r.a.createElement("h5",null,"Recebido por"),r.a.createElement("div",{className:"emitentCpf"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"payeeName"},"Emitente"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeName",placeholder:"",id:"payeeName",value:c.payeeName,onChange:v})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"payeeCpfOrRg"},"CPF/RG"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg",placeholder:"",id:"payeeCpfOrRg",value:c.payeeCpfOrRg,onChange:v}))),r.a.createElement("label",{htmlFor:"payeeAddress"},"Endere\xe7o"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress",placeholder:"",id:"payeeAddress",value:c.payeeAddress,onChange:v})),r.a.createElement("div",{className:"action-bar"},r.a.createElement("button",{onClick:function(){return h()}},"Pronto"))))},k=(a(14),Object(v.a)((function(e){return r.a.createElement("div",{className:"receipt-container"},r.a.createElement("div",{className:"receipt-header"},r.a.createElement("span",null,"RECIBO"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(t){return e.receipt.paidValue=t.target.value}}))),r.a.createElement("div",{className:"receipt-payer"},r.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(t){return e.receipt.payer=t.target.value}}),r.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(t){return e.receipt.payerAddress=t.target.value}}),r.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(t){return e.receipt.paidValueAsText=t.target.value}}),r.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(t){return e.receipt.referrerTo=t.target.value}})),r.a.createElement("div",{className:"receipt-date"},r.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})),r.a.createElement("div",{className:"receipt-payee"},r.a.createElement("div",{className:"emitentCpf"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"payee-"+e.index},"Emitente"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payee-"+e.index,placeholder:"",id:"payee-"+e.index,value:e.payee,readOnly:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"payeeCpfOrRg-"+e.index},"CPF/RG"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeCpfOrRg-"+e.index,placeholder:"",id:"payeeCpfOrRg-"+e.index,value:e.payeeCpfOrRg,readOnly:!0}))),r.a.createElement("label",{htmlFor:"payeeAddress-"+e.index},"Endere\xe7o"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeAddress-"+e.index,placeholder:"",id:"payeeAddress-"+e.index,value:e.payeeAddress,readOnly:!0}),r.a.createElement("label",{htmlFor:"payeeSignature-"+e.index},"Assinatura"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payeeSignature-"+e.index,placeholder:"",id:"payeeSignature-"+e.index})))}))),j=Object(v.a)((function(e){return r.a.createElement("div",{className:"receipt-container"},r.a.createElement("div",{className:"receipt-header"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"receiptNumber-"+e.index},"Numero"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"receiptNumber-"+e.index,placeholder:"",id:"receiptNumber-"+e.index})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"paidValue-"+e.index},"Valor"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValue-"+e.index,placeholder:"",id:"paidValue-"+e.index,value:e.receipt.paidValue,onChange:function(t){return e.receipt.paidValue=t.target.value}}))),r.a.createElement("div",{className:"receipt-payer"},r.a.createElement("label",{htmlFor:"payer-"+e.index},"Recebi (emos) de"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payer-"+e.index,placeholder:"",id:"payer-"+e.index,value:e.receipt.payer,onChange:function(t){return e.receipt.payer=t.target.value}}),r.a.createElement("label",{htmlFor:"payerAddress-"+e.index},"Endere\xe7o"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"payerAddress-"+e.index,placeholder:"",id:"payerAddress-"+e.index,value:e.receipt.payerAddress,onChange:function(t){return e.receipt.payerAddress=t.target.value}}),r.a.createElement("label",{htmlFor:"paidValueAsText-"+e.index},"A import\xe2ncia de"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"paidValueAsText-"+e.index,placeholder:"",id:"paidValueAsText-"+e.index,value:e.receipt.paidValueAsText,onChange:function(t){return e.receipt.paidValueAsText=t.target.value}}),r.a.createElement("label",{htmlFor:"referrerTo-"+e.index},"Referente"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"referrerTo-"+e.index,placeholder:"",id:"referrerTo-"+e.index,value:e.receipt.referrerTo,onChange:function(t){return e.receipt.referrerTo=t.target.value}})),r.a.createElement("div",{className:"receipt-date"},r.a.createElement("label",{htmlFor:"date-"+e.index},"Data"),r.a.createElement("input",{className:"u-full-width",type:"text",name:"date-"+e.index,placeholder:"",id:"date-"+e.index,value:e.date,readOnly:!0})))})),A=function(e){var t=e.database,a=Object(n.useState)([]),i=Object(d.a)(a,2),c=i[0],l=i[1];return Object(n.useEffect)((function(){function a(){return(a=Object(s.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getReceipts(e.receiptIds);case 2:n=a.sent,l(n);case 4:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"receipt-to-print-list"},r.a.createElement("header",{className:"top-app-bar no-printable"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",{onClick:function(){return window.history.back()}},r.a.createElement("i",{className:"fas fa-arrow-left"}))),r.a.createElement("div",{className:"top-app-bar__title"},"Imprimir")),r.a.createElement("div",{className:"action-top-bar"},r.a.createElement("button",{className:"button-primary no-printable",onClick:window.print},"Imprimir")),r.a.createElement("div",{className:""},r.a.createElement("h2",null,"Canhotos"),c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(j,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))})),r.a.createElement("h2",null,"Recibos"),c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(k,{key:e.id,index:e.id,payee:e.payeeName,payeeCpfOrRg:e.payeeCpfOrRg,payeeAddress:e.payeeAddress,date:e.date,receipt:e}))}))))},_=function(e){var t=[{id:"payerName",label:"Recebi (emos) de",field:m.PayerName},{id:"referrerTo",label:"Referente",field:m.ReferrerTo},{id:"paidValue",label:"Valor",field:m.PaidValue},{id:"payerAddress",label:"Endere\xe7o",field:m.PayerAddress},{id:"date",label:"Data",field:m.Date},{id:"payeeName",label:"Emitente",field:m.PayeeName},{id:"payeeCpfOrRg",label:"CPF/RG",field:m.PayeeCpfOrRg}];return r.a.createElement("form",{name:"multipleedit-form-"+e.stepSetting,action:"javascript:void(0);",noValidate:!0},t.map((function(t){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:t.id},t.label),r.a.createElement("input",{name:t.id,id:t.id,type:"checkbox",checked:e.fieldsSettings.getFieldSetting(t.field)===e.stepSetting,onChange:function(){return e.onChange(t.field,e.stepSetting,e.otherSetting)},disabled:e.fieldsSettings.getFieldSetting(t.field)===e.otherSetting}))})),r.a.createElement("div",{className:"action-bar"},e.children))};!function(e){e.ReceiptNumber="ReceiptNumber",e.PayerName="PayerName",e.ReferrerTo="ReferrerTo",e.PaidValue="PaidValue",e.PayerAddress="PayerAddress",e.PaidValueAsText="PaidValueAsText",e.Date="Date",e.PayeeName="PayeeName",e.PayeeCpfOrRg="PayeeCpfOrRg",e.PayeeAddress="PayeeAddress"}(m||(m={})),function(e){e.None="None",e.ToIdentify="ToIdentify",e.ToUpdate="ToUpdate"}(f||(f={}));var T=function(){function e(){Object(w.a)(this,e),this.fieldSettingsMap=void 0,this.fieldSettingsMap=new Map([[m.ReceiptNumber,f.None],[m.PayerName,f.None],[m.ReferrerTo,f.None],[m.PaidValue,f.None],[m.PayerAddress,f.None],[m.PaidValueAsText,f.None],[m.Date,f.None],[m.PayeeName,f.None],[m.PayeeCpfOrRg,f.None]])}return Object(O.a)(e,[{key:"fieldSettings",get:function(){return this.fieldSettingsMap}},{key:"getFieldSetting",value:function(e){return this.fieldSettingsMap.get(e)}},{key:"setFieldSetting",value:function(e,t){this.fieldSettingsMap.set(e,t)}},{key:"fieldsToIdentify",value:function(){var e=new Array;return this.fieldSettingsMap.forEach((function(t,a){t===f.ToIdentify&&e.push(a)})),e}},{key:"fieldsToUpdate",value:function(){var e=new Array;return this.fieldSettingsMap.forEach((function(t,a){t===f.ToUpdate&&e.push(a)})),e}}],[{key:"Instance",value:function(t){var a=new e;return a.fieldSettingsMap=t,a}}]),e}(),R=function(e){var t=Object(n.useState)(new T),a=Object(d.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(1),o=Object(d.a)(l,2),s=o[0],u=o[1];function p(e,t){var a=T.Instance(i.fieldSettings);a.setFieldSetting(e,t),c(a)}function m(e,t,a){var n=i.getFieldSetting(e);n===t&&p(e,f.None),n===a&&p(e,t),n===f.None&&p(e,t)}return Object(n.useEffect)((function(){e.database.getMultiEditionSettings().then((function(e){c(e)})).catch((function(){console.error("Fail to load fieldsSettings")}))}),[]),r.a.createElement("div",null,r.a.createElement("header",{className:"top-app-bar"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",{onClick:function(){1==s?window.history.back():u(s-1)}},r.a.createElement("i",{className:"fas fa-arrow-left"}))),r.a.createElement("div",{className:"top-app-bar__title"},1===s&&"1 de 2 Campos de refer\xeancia",2===s&&"2 de 2 Campos a mudar"),r.a.createElement("div",{className:"top-app-bar__right-part"},r.a.createElement("a",{onClick:function(){window.history.back()}},r.a.createElement("i",{className:"fas fa-times top-app-bar__icon"})))),1===s&&r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement("p",null,"Selecione as informa\xe7\xf5es que ir\xe3o te ajudar a identificar qual recibo voc\xea estar\xe1 editando."),r.a.createElement(_,{fieldsSettings:i,stepSetting:f.ToIdentify,otherSetting:f.ToUpdate,onChange:m},r.a.createElement("div",{className:"action-bar"},r.a.createElement("button",{onClick:function(){return u(2)}},"Continuar")))),2===s&&r.a.createElement("div",null,r.a.createElement("p",null),r.a.createElement("p",null,"Selecione quais as informa\xe7\xf5es que voc\xea quer atualizar."),r.a.createElement(_,{fieldsSettings:i,stepSetting:f.ToUpdate,otherSetting:f.ToIdentify,onChange:m},r.a.createElement("div",{className:"action-bar"},r.a.createElement("button",{onClick:function(){e.database.saveMultiEditionSettings(i).then((function(){e.nextPageHash?window.location.hash=e.nextPageHash:window.history.back()})).catch((function(e){alert("Erro ao tentar gravar."),console.log(e)}))}},"Salvar e seguir")))))},V=function(e){return r.a.createElement("div",null,!e.readonly&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("input",{className:"u-full-width",type:e.type,name:e.id,placeholder:"",id:e.id,value:e.value,onChange:e.onChange,autoFocus:!0})),e.readonly&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("span",null,e.value)))},F=function(e){var t=Object(n.useState)(e.receipt||new S),a=Object(d.a)(t,2),i=a[0],c=a[1];Object(n.useEffect)((function(){c(e.receipt)}),[e.receipt.id]);var l=function(t){var a=t.target,n=a.name,r=a.value;c((function(e){var t=Object(x.a)({},e);return t[n]=r,t}));var l=new S;l.id=i.id,l.payerName=i.payerName,l.payerAddress=i.payerAddress,l.referrerTo=i.referrerTo,l.paidValue=i.paidValue,l.paidValueAsText=i.paidValueAsText,l.date=i.date,l.payeeName=i.payeeName,l.payeeCpfOrRg=i.payeeCpfOrRg,l.payeeAddress=i.payeeAddress,e.onChange(l)},o=new Map([[m.PayerName,{id:"payerName",label:"Recebi (emos) de",value:i.payerName,type:"text"}],[m.ReferrerTo,{id:"referrerTo",label:"Referente",value:i.referrerTo,type:"text"}],[m.PaidValue,{id:"paidValue",label:"Valor",value:i.paidValue,type:"text"}],[m.PayerAddress,{id:"payerAddress",label:"Endere\xe7o",value:i.payerAddress,type:"text"}],[m.Date,{id:"date",label:"Data",value:i.date,type:"date"}],[m.PayeeName,{id:"payeeName",label:"Emitente",value:i.payeeName,type:"text"}],[m.PayeeCpfOrRg,{id:"payeeCpfOrRg",label:"CPF/RG",value:i.payeeCpfOrRg,type:"text"}]]);function s(e,t){var a=o.get(e);return r.a.createElement(V,{id:a.id,label:a.label,value:a.value,type:a.type,onChange:l,readonly:t})}return r.a.createElement("form",{className:"receipt-form",name:"receipt-form",action:"javascript:void(0);",noValidate:!0},e.fieldsToIdentify.map((function(e){return s(e,!0)})),e.fieldsToUpdate.map((function(e){return s(e,!1)})))},P=function(e){var t=Object(n.useState)(!0),a=Object(d.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(),u=Object(d.a)(l,2),p=u[0],m=u[1],f=Object(n.useState)(new T),h=Object(d.a)(f,2),v=h[0],y=h[1];function b(){return(b=Object(s.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.database.updateReceipt(p,p.id);case 2:(a=e.currentIndex+1)<e.receiptIds.length?window.location.hash="#multi-edition?receiptIds=".concat(JSON.stringify(e.receiptIds),"&current=").concat(a):window.location.hash="#receipt-list";case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){e.database.getMultiEditionSettings().then((function(e){y(e)})).catch((function(e){console.error("Fail to load fieldsSettings",e)})),e.database.getReceipt(e.receiptIds[e.currentIndex]).then((function(e){m(e)})).catch((function(e){console.error("Fail to load fieldsSettings",e)})).finally((function(){c(!1)}))}),[e.currentIndex]),r.a.createElement("div",null,r.a.createElement("header",{className:"top-app-bar"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",{onClick:function(){return window.history.back()}},r.a.createElement("i",{className:"fas fa-arrow-left"}))),r.a.createElement("div",{className:"top-app-bar__title"},"Editando ",e.currentIndex+1," de ",e.receiptIds.length),r.a.createElement("div",{className:"top-app-bar__right-part"})),i&&r.a.createElement("span",null,"Loading"),!i&&r.a.createElement("div",null,r.a.createElement(F,{receipt:p,onChange:function(e){return m(e)},fieldsToIdentify:v.fieldsToIdentify(),fieldsToUpdate:v.fieldsToUpdate()}),r.a.createElement("div",{className:"action-bar"},r.a.createElement("button",{onClick:function(){return b.apply(this,arguments)}},"Salvar e pr\xf3ximo"))))},I=function(e){return r.a.createElement("div",null,r.a.createElement("header",{className:"top-app-bar"},r.a.createElement("div",{className:"top-app-bar__navigation"},r.a.createElement("a",{onClick:function(){return window.history.back()}},r.a.createElement("i",{className:"fas fa-arrow-left"}))),r.a.createElement("div",{className:"top-app-bar__title"},"Configura\xe7\xf5es"),r.a.createElement("div",{className:"top-app-bar__right-part"})),r.a.createElement("p",null),r.a.createElement("button",{onClick:function(){return window.location.hash="#multi-edition-settings"}},"Configurar campos de edi\xe7\xe3o multipla."))},M=a(5),D=a(15),z=function e(){Object(w.a)(this,e),this.id=void 0,this.value=void 0},J=Object(D.a)("db"),q=function(){function e(){Object(w.a)(this,e),Object.defineProperty(this,J,{writable:!0,value:void 0})}return Object(O.a)(e,[{key:"connect",value:function(){var e=this;return new Promise((function(t,a){var n=indexedDB.open("EasyReceipts",1);n.onerror=function(e){console.error("error creating/connecting to db",e),a("Failed to connected/create/update DB")},n.onsuccess=function(a){var n;Object(M.a)(e,J)[J]=null===(n=a.target)||void 0===n?void 0:n.result,console.info("connected successfuly to DB"),t("Connected")},n.onupgradeneeded=function(t){var a;Object(M.a)(e,J)[J]=null===(a=t.target)||void 0===a?void 0:a.result,Object(M.a)(e,J)[J].createObjectStore("receipt",{autoIncrement:!0}),Object(M.a)(e,J)[J].createObjectStore("userSetting",{keyPath:"id"}).createIndex("value","value",{unique:!1})}}))}},{key:"executeWithinTransaction",value:function(e,t){var a=this;return new Promise((function(n,r){var i=Object(M.a)(a,J)[J].transaction([e],"readwrite").objectStore(e),c=t.apply(void 0,[i]);c.onerror=function(t){console.error("Error on executing transaction on table ".concat(e)),r()},c.onsuccess=function(e){n(!0)}}))}},{key:"fetchById",value:function(e,t){var a=this;return new Promise((function(n,r){var i=Object(M.a)(a,J)[J].transaction([e]).objectStore(e).get(t);i.onerror=function(a){console.error("Error on fiding ".concat(t," on table ").concat(e)),r()},i.onsuccess=function(e){if(i.result){var a=i.result;a.id=t,n(a)}else n(void 0)}}))}},{key:"saveMultiEditionSettings",value:function(){var e=Object(s.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchById("userSetting","multi-edition");case 2:return a=e.sent,e.abrupt("return",this.executeWithinTransaction("userSetting",(function(e){var n=new z;return n.id="multi-edition",n.value=JSON.stringify(Array.from(t.fieldSettings)),a?e.put(n):e.add(n)})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMultiEditionSettings",value:function(){var e=this;return new Promise(function(){var t=Object(s.a)(o.a.mark((function t(a,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchById("userSetting","multi-edition");case 2:r=t.sent,a(r?T.Instance(new Map(JSON.parse(r.value||""))):new T);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}},{key:"addReceipt",value:function(e){return this.executeWithinTransaction("receipt",(function(t){return t.add(e)}))}},{key:"updateReceipt",value:function(e,t){if(!t)throw new Error("Id must not be undefined!");return this.executeWithinTransaction("receipt",(function(a){return a.put(e,t)}))}},{key:"deleteReceipt",value:function(e){return this.executeWithinTransaction("receipt",(function(t){return t.delete(e)}))}},{key:"batchDelete",value:function(e){var t=this;return new Promise((function(a,n){for(var r=Object(M.a)(t,J)[J].transaction(["receipt"],"readwrite"),i=e.next();!i.done;)r.objectStore("receipt").delete(i.value),i=e.next();r.oncomplete=function(e){a()},r.onerror=function(e){console.error("Error on deleting batch of receipts"),n()}}))}},{key:"batchAdd",value:function(e){var t=this;return new Promise((function(a,n){for(var r=Object(M.a)(t,J)[J].transaction(["receipt"],"readwrite"),i=e.next();!i.done;)r.objectStore("receipt").add(i.value),i=e.next();r.oncomplete=function(e){a()},r.onerror=function(e){console.error("Error on adding batch of receipts"),n()}}))}},{key:"arrayAdd",value:function(e){var t=this;return new Promise((function(a,n){for(var r=Object(M.a)(t,J)[J].transaction(["receipt"],"readwrite"),i=0;i<e.length;i++)r.objectStore("receipt").add(e[i]);r.oncomplete=function(e){a()},r.onerror=function(e){console.error("Error on adding batch of receipts"),n()}}))}},{key:"getReceipts",value:function(e){var t=this;return new Promise((function(a,n){var r=new Array;e.map((function(n,i){t.getReceipt(n).then((function(t){r.push(t),i===e.length-1&&a(r)}))}))}))}},{key:"getReceipt",value:function(e){var t=this;return new Promise(function(){var a=Object(s.a)(o.a.mark((function a(n,r){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.fetchById("receipt",e);case 2:(i=a.sent)?n(i):(console.warn("Receipt not found"),n(new S));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},{key:"getAllReceipts",value:function(){var e=this;return new Promise((function(t,a){var n=Object(M.a)(e,J)[J].transaction(["receipt"]).objectStore("receipt"),r=[];n.openCursor().onsuccess=function(e){var a=e.target.result;if(a){var n=new S;n.payerName=a.value.payerName,n.payerAddress=a.value.payerAddress,n.referrerTo=a.value.referrerTo,n.paidValue=a.value.paidValue,n.paidValueAsText=a.value.paidValueAsText,n.date=a.value.date,n.payeeName=a.value.payeeName,n.payeeCpfOrRg=a.value.payeeCpfOrRg,n.payeeAddress=a.value.payeeAddress,n.id=a.key,r.push(n),a.continue()}else console.log("No more entries!"),t(r)}}))}},{key:"db",value:function(){return Object(M.a)(this,J)[J]}}]),e}();function B(){var e=window.location.hash.substr(1),t=new Map,a=e.split("/"),n=a[0]||"",r=a[1]||"";if(e.includes("?")){var i=e.split("?");n=i[0],(i[1]||"").split("&").map((function(e){var a=e.split("=");t.set(a[0],a[1])}))}return{path:n,pathId:r,queryString:t}}var U=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(B().path),l=Object(d.a)(c,2),u=l[0],p=l[1],m=Object(n.useState)(parseInt(B().pathId)),f=Object(d.a)(m,2),h=f[0],v=f[1],y=Object(n.useState)(B().queryString),b=Object(d.a)(y,2),E=b[0],N=b[1];window.onhashchange=function(){var e=B();p(e.path),v(parseInt(e.pathId)),N(e.queryString)};var x=Object(n.useState)(new q),w=Object(d.a)(x,2),O=w[0];w[1];return Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.connect();case 2:i(!1),window.Database=O;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"rootApp"},r.a.createElement("main",null,function(){if(a)return r.a.createElement("span",null,"Loading");if(!u||"receipt-list"===u)return r.a.createElement(g,{database:O});if("receipt-clone"===u&&h)return r.a.createElement(C,{receiptId:h,database:O,toClone:!0});if("receipt"===u&&h)return r.a.createElement(C,{receiptId:h,database:O});if("receipt"===u)return r.a.createElement(C,{database:O});var e=E.get("receiptIds");if("receipts-to-print"===u&&void 0!=e)return r.a.createElement(A,{database:O,receiptIds:JSON.parse(e)});var t=E.get("current");return"multi-edition"===u&&void 0!=e?r.a.createElement(P,{database:O,receiptIds:JSON.parse(e),currentIndex:t?parseInt(t):0}):"multi-edition-settings"===u?r.a.createElement(R,{database:O}):"settings"===u?r.a.createElement(I,null):"NOTFOUND"}()),r.a.createElement("footer",{className:"bottom-app-bar"},r.a.createElement("a",{href:"#receipt-list",className:"bottom-app-bar_icon"},r.a.createElement("i",{className:"fas fa-list "+("receipt-list"==u||""==u?"opacity-half":"")}),r.a.createElement("span",null,"Lista")),r.a.createElement("a",{href:"#receipt",className:"bottom-app-bar_icon"},r.a.createElement("i",{className:"fas fa-plus-square "+("receipt"==u?"opacity-half":"")}),r.a.createElement("span",null,"Novo")),r.a.createElement("a",{href:"#settings",className:"bottom-app-bar_icon"},r.a.createElement("i",{className:"fas fa-cogs "+("settings"==u?"opacity-half":"")}),r.a.createElement("span",null,"Configura\xe7\xf5es"))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))}],[[31,1,2]]]);
//# sourceMappingURL=main.c1a900d9.chunk.js.map